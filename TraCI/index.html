
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kudzuyu.github.io/SUMO-wiki-ja/TraCI/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>TraCI - SUMO wiki ja</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:600,800">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction-to-traci" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href=".." title="SUMO wiki ja" class="md-header__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../images/sumo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SUMO wiki ja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              TraCI
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  ドキュメント

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Downloads/" class="md-tabs__link">
        
  
  
    
  
  ダウンロード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Publications/" class="md-tabs__link">
        
  
  
    
  
  出版物

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SUMO wiki ja" class="md-nav__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../images/sumo-logo.png" alt="logo">

    </a>
    SUMO wiki ja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドキュメント
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ダウンロード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    出版物
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction-to-traci" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction to TraCI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-traci" class="md-nav__link">
    <span class="md-ellipsis">
      Using TraCI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using TraCI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sumo-startup" class="md-nav__link">
    <span class="md-ellipsis">
      SUMO startup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-clients" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#protocol-specification" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol specification
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown" class="md-nav__link">
    <span class="md-ellipsis">
      Shutdown
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traci-commands" class="md-nav__link">
    <span class="md-ellipsis">
      TraCI Commands
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TraCI Commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#value-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      Value Retrieval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-changing" class="md-nav__link">
    <span class="md-ellipsis">
      State Changing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subscriptions" class="md-nav__link">
    <span class="md-ellipsis">
      Subscriptions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-sumo-as-a-library" class="md-nav__link">
    <span class="md-ellipsis">
      Using SUMO as a library
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-use" class="md-nav__link">
    <span class="md-ellipsis">
      Example use
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interfaces-by-programming-language" class="md-nav__link">
    <span class="md-ellipsis">
      Interfaces by Programming Language
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#v2x-simulation" class="md-nav__link">
    <span class="md-ellipsis">
      V2X simulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Other Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance" class="md-nav__link">
    <span class="md-ellipsis">
      Performance
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#current-and-future-development" class="md-nav__link">
    <span class="md-ellipsis">
      Current and Future Development
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-files-are-not-closed" class="md-nav__link">
    <span class="md-ellipsis">
      Output files are not closed.
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#obsolete-apis" class="md-nav__link">
    <span class="md-ellipsis">
      Obsolete APIs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>TraCI</h1>

<h2 id="introduction-to-traci">Introduction to TraCI<a class="headerlink" href="#introduction-to-traci" title="Permanent link">&para;</a></h2>
<p>TraCI is the short term for "<strong>Tra</strong>ffic <strong>C</strong>ontrol <strong>I</strong>nterface".
Giving access to a running road traffic simulation, it allows to
retrieve values of simulated objects and to manipulate their behavior
"on-line". If performance is an issue you should consider using
<a href="../Libsumo/">libsumo</a> instead. You can also start with TraCI and switch
to libsumo later, since the function signatures are the same.</p>
<h2 id="using-traci">Using TraCI<a class="headerlink" href="#using-traci" title="Permanent link">&para;</a></h2>
<h3 id="sumo-startup">SUMO startup<a class="headerlink" href="#sumo-startup" title="Permanent link">&para;</a></h3>
<p>TraCI uses a TCP based client/server architecture to provide access to
<a href="../sumo/">sumo</a>. Thereby, <a href="../sumo/">sumo</a> acts as server
that is started with additional command-line options: <strong>--remote-port</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;INT&gt;</em></a> where <a href="/Basics/Notation/#データタイプ"><em>&lt;INT&gt;</em></a> is the
port <a href="../sumo/">sumo</a> will listen on for incoming connections.</p>
<p>When started with the <strong>--remote-port</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;INT&gt;</em></a> option, <a href="../sumo/">sumo</a> only prepares the
simulation and waits for all external applications to connect and take
over the control. Please note, that the <strong>--end</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;TIME&gt;</em></a> option is ignored when
<a href="../sumo/">sumo</a> runs as a TraCI server, <a href="../sumo/">sumo</a>
runs until the client demands a simulation end.</p>
<p>When using <a href="../sumo-gui/">sumo-gui</a> as a server, the simulation
must either be started by using the <a href="../sumo-gui/#usage_description"><em>play</em>
button</a> or by setting the option <strong>--start</strong>
before TraCI commands will be processed.</p>
<h3 id="multiple-clients">Multiple clients<a class="headerlink" href="#multiple-clients" title="Permanent link">&para;</a></h3>
<p>The number of clients which can connect can be given as an additional
option <strong>--num-clients</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;INT&gt;</em></a>, where 1 is the default. Please note that in multi client
scenarios you must explicitly specify the execution order of the clients
using the
<a href="Control-related_commands/#command_0x03_setorder"><em>SetOrder</em>-command</a>.</p>
<p>Each client must specify a unique (but otherwise arbitrary) integer value
and the client commands will be handled in the order from the lowest to
the highest value within each simulation step.</p>
<p>The clients are automatically synchronized after every simulation step. This means, the simulation does not advance to the next step until all clients have called the 'simulationStep'' command. Also, the simulationStep command only returns control to the client after the simulation has advanced.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The simulation will only start once all clients have connected.</p>
</div>
<h3 id="protocol-specification">Protocol specification<a class="headerlink" href="#protocol-specification" title="Permanent link">&para;</a></h3>
<p>Please see the <a href="Protocol/">TraCI Protocol Specification</a>
(including <a href="Protocol/#basic_flow">Basic Flow</a>,
<a href="Protocol/#messages">Messages</a>, <a href="Protocol/#data_types">Data
Types</a>).</p>
<h3 id="shutdown">Shutdown<a class="headerlink" href="#shutdown" title="Permanent link">&para;</a></h3>
<p>When using TraCI, the <strong>--end</strong> option of <a href="../sumo/">sumo</a> is ignored.
Instead the simulation is closed by issuing the <a href="Control-related_commands/#command_0x7f_close"><em>close</em>
command</a>.
To detect whether all route files have been exhausted and all vehicles
have left the simulation, one can check whether the command
<a href="Simulation_Value_Retrieval/">getMinExpectedNumber</a>
returns 0. The simulation will end as soon as all clients have sent the
<em>close</em> command.</p>
<p>It is also possible to reload the simulation with a new list of
arguments by using the
<a href="Control-related_commands/#command_0x01_load"><em>load</em>-command</a>.</p>
<h2 id="traci-commands">TraCI Commands<a class="headerlink" href="#traci-commands" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="Control-related_commands/">Control-related commands</a>: perform a
  simulation step, close the connection, reload the simulation.</li>
<li><a href="GenericParameters/">Generic Parameters</a></li>
</ul>
<p>For the following APIs, the ID is equal to the ID defined in
<a href="../sumo/">sumo</a>'s input files. Here, you find their <a href="SUMO_ID_Commands_Structure/">general
structure</a>.</p>
<h3 id="value-retrieval">Value Retrieval<a class="headerlink" href="#value-retrieval" title="Permanent link">&para;</a></h3>
<ul>
<li>Traffic Objects</li>
<li><a href="Vehicle_Value_Retrieval/">Vehicle Value Retrieval</a> retrieve
    information about vehicles</li>
<li><a href="Person_Value_Retrieval/">Person Value Retrieval</a> retrieve
    information about persons</li>
<li><a href="VehicleType_Value_Retrieval/">Vehicle Type Value Retrieval</a>
    retrieve information about vehicle types</li>
<li><a href="Route_Value_Retrieval/">Route Value Retrieval</a>
    retrieve information about routes</li>
<li>Detectors and Outputs</li>
<li><a href="Induction_Loop_Value_Retrieval/">Induction Loop Value Retrieval</a>
    retrieve information about induction loops</li>
<li><a href="Lane_Area_Detector_Value_Retrieval/">Lane Area Detector Value Retrieval</a>
    retrieve information about lane area detectors</li>
<li><a href="Multi-Entry-Exit_Detectors_Value_Retrieval/">Multi-Entry-Exit Detectors Value Retrieval</a>
    retrieve information about multi-entry/multi-exit detectors</li>
<li><a href="Calibrator/">Calibrator Value Retrieval</a>
    retrieve information about calibrators</li>
<li><a href="RouteProbe/">RouteProbe</a>
    retrieve information about the RouteProbe</li>
<li>Network</li>
<li><a href="Junction_Value_Retrieval/">Junction Value Retrieval</a> retrieve
    information about junctions</li>
<li><a href="Edge_Value_Retrieval/">Edge Value Retrieval</a>
    retrieve information about edges</li>
<li><a href="Lane_Value_Retrieval/">Lane Value Retrieval</a>
    retrieve information about lanes</li>
<li>Infrastructure</li>
<li><a href="Traffic_Lights_Value_Retrieval/">Traffic Lights Value Retrieval</a>
    retrieve information about traffic lights</li>
<li><a href="BusStop/">BusStop Value Retrieval</a>
    retrieve information about BusStops</li>
<li><a href="ChargingStation/">Charging Station Value Retrieval</a>
    retrieve information about charging stations</li>
<li><a href="ParkingArea/">Parking Area Value Retrieval</a>
    retrieve information about parking areas</li>
<li><a href="OverheadWire/">Overhead Wire Value Retrieval</a>
    retrieve information about overhead wires</li>
<li><a href="Rerouter/">Rerouter</a>
    retrieve information about the rerouter</li>
<li>Misc</li>
<li><a href="Simulation_Value_Retrieval/">Simulation Value Retrieval</a> retrieve
    information about the simulation</li>
<li><a href="GUI_Value_Retrieval/">GUI Value Retrieval</a>
    retrieve information about the simulation visualization</li>
<li><a href="POI_Value_Retrieval/">PoI Value Retrieval</a>
    retrieve information about points-of-interest</li>
<li><a href="Polygon_Value_Retrieval/">Polygon Value Retrieval</a>
    retrieve information about polygons</li>
</ul>
<h3 id="state-changing">State Changing<a class="headerlink" href="#state-changing" title="Permanent link">&para;</a></h3>
<ul>
<li>Traffic Objects</li>
<li><a href="Change_Vehicle_State/">Change Vehicle State</a>
    change a vehicle's state</li>
<li><a href="Change_Person_State/">Change Person State</a>
    change a persons state</li>
<li><a href="Change_VehicleType_State/">Change Vehicle Type
    State</a> change a
    vehicle type's state</li>
<li><a href="Change_Route_State/">Change Route State</a> change
    a route's state</li>
<li>Detectors and Outputs</li>
<li><a href="Change_Calibrator_State/">Change Calibrator State</a> change a
    calibrator state</li>
<li><a href="Change_Inductionloop_State/">Change Inductionloop State</a> change a
    inductionloop state</li>
<li><a href="Change_Lane_Area_Detector_State/">Change Lane Area Detector State</a> change a
    lane area detector state</li>
<li>Network</li>
<li><a href="Change_Edge_State/">Change Edge State</a> change
    an edge's state</li>
<li><a href="Change_Lane_State/">Change Lane State</a> change a
    lane's state</li>
<li>Infrastructure</li>
<li><a href="Change_Traffic_Lights_State/">Change Traffic Lights
    State</a> change a
    traffic lights' state</li>
<li><a href="Change_ChargingStation_State/">Change Charging Station State</a> change a charging stations's attributes</li>
<li><a href="Change_ParkingArea_State/">Change Parking Area State</a> change parking area attributes</li>
<li>Misc</li>
<li><a href="Change_Simulation_State/">Change Simulation
    State</a> change the
    simulation</li>
<li><a href="Change_GUI_State/">Change GUI State</a> change the
    simulation visualization</li>
<li><a href="Change_PoI_State/">Change PoI State</a> change a
    point-of-interest's state (or add/remove one)</li>
<li><a href="Change_Polygon_State/">Change Polygon State</a>
    change a polygon's state (or add/remove one)</li>
</ul>
<h3 id="subscriptions">Subscriptions<a class="headerlink" href="#subscriptions" title="Permanent link">&para;</a></h3>
<p>Subscriptions are a way to get notified repeatedly about changes in variables.
They are applicable to all variables mentioned in the respective value retrieval section
of the domain in question unless noted otherwise.
For details see the separate page on <a href="Object_Variable_Subscription/">object variable subscription</a>.</p>
<p>It is also possible to subscribe to values of objects
surrounding another object (e.g. all vehicles around a certain junction).
This is called <a href="Object_Context_Subscription/">context subscription</a>.</p>
<p>Subscriptions may be faster than repeated value retrieval, see the section on <a href="#performance">Performance</a>.</p>
<h2 id="using-sumo-as-a-library">Using SUMO as a library<a class="headerlink" href="#using-sumo-as-a-library" title="Permanent link">&para;</a></h2>
<p>Normally, TraCI is used to couple multiple processes: A SUMO server
process and one or more TraCI client processes. Alternatively,
<a href="../Libsumo/">Libsumo</a> can be used to embed SUMO as a library
into the client process. This allows using the same method signatures as
in the client libraries but avoids the overhead of socket communication.
Libsumo supports generating client libraries using
<a href="https://en.wikipedia.org/wiki/SWIG">SWIG</a> and can therefore be used
with a large number of programming languages. C++, Java and Python
bindings are included when downloading a sumo-build.</p>
<h2 id="example-use">Example use<a class="headerlink" href="#example-use" title="Permanent link">&para;</a></h2>
<ul>
<li>There is a <a href="../Tutorials/TraCI4Traffic_Lights/">tutorial on using TraCI for adaptive traffic
  lights</a> (using Python).</li>
<li>The <a href="../Tutorials/CityMobil/">Tutorials/CityMobil</a> tutorial
  uses TraCI for assigning new routes to vehicles (using Python).</li>
<li>The
  <a href="../Tutorials/TraCIPedCrossing/">Tutorials/TraCIPedCrossing</a>
  tutorial uses TraCI for building a crossing with a pedestrian
  triggered traffic light.</li>
</ul>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">&para;</a></h2>
<h3 id="interfaces-by-programming-language">Interfaces by Programming Language<a class="headerlink" href="#interfaces-by-programming-language" title="Permanent link">&para;</a></h3>
<ul>
<li>Python: <a href="Interfacing_TraCI_from_Python/">the python module traci</a> allows
  to interact with <a href="../sumo/">sumo</a> using Python (This library
  is part of the sumo source code and all releases, is tested daily and supports all TraCI commands).
  It is also <a href="https://pypi.org/project/traci/">available on PyPI</a> and can thus be installed
  using <code>pip install traci</code>.</li>
<li>C++: <a href="../Libtraci/">libtraci</a> is a client library that is part of the <a href="../sumo/">sumo</a>-source tree. It is fully API-compatible with <a href="../Libsumo/">libsumo</a>.</li>
<li>C++: <a href="C%2B%2BTraCIAPI/">The C++ TraCIAPI</a> is a client
  library that is part of the <a href="../sumo/">sumo</a>-source tree. (API
  coverage is good but this client is no longer updated. Please use libtraci instead.)</li>
<li>C++: <a href="https://veins.car2x.org">The Veins project</a> provides a
  middle-ware for coupling <a href="../sumo/">sumo</a> with
  <a href="https://omnetpp.org/">OMNET++</a>. As part of the infrastructure it
  provides a C++ client library for the TraCI API (API completeness is
  a bit behind the python client).</li>
<li>.NET:
  <a href="https://github.com/CodingConnected/CodingConnected.Traci">TraCI.NET</a>
  is a client library with good API coverage.</li>
<li>.NET: libtracics is an experimental SWIG generated binding to the original libtraci.
  It has full API coverage but is untested and needs to be generated by the user from the source.</li>
<li>Matlab
  <a href="https://mathworks.com/matlabcentral/fileexchange/44805-traci4matlab">TraCI4Matlab</a>.
  The client is included as part of each SUMO release in
  <strong><em>&lt;SUMO_HOME&gt;</em></strong><em>/tools/contributed/traci4matlab</em>
  Not all TraCI commands have been implemented. It is recommended to
  <a href="https://mathworks.com/help/matlab/call-python-libraries.html">use the python client</a> from inside Matlab instead.</li>
<li>Java: <a href="../Libtraci/">libtraci</a> is a client library that is part of the <a href="../sumo/">sumo</a>-source tree.
  It is fully API-compatible with <a href="../Libsumo/">libsumo</a> and a SUMO release provides pro-compiled Java bindings (via SWIG).</li>
<li>Java: <a href="TraaS/#java_client">TraaS</a> provides a client
  library that is part of the <a href="../sumo/">sumo</a>-source tree (API
  coverage is large but this client is no longer updated. Use libtraci instead)</li>
<li>Others: Any language that is supported by <a href="https://swig.org/">SWIG</a> can in principle use the bindings provided by libsumo or libtraci.</li>
</ul>
<h3 id="v2x-simulation">V2X simulation<a class="headerlink" href="#v2x-simulation" title="Permanent link">&para;</a></h3>
<p>TraCI allows to use <a href="../sumo/">sumo</a> in combination with
communication network simulators for simulating <a href="../Topics/V2X/">vehicular
communication</a>. See
<a href="../Topics/V2X/">Topics/V2X</a> for a list of available solutions.</p>
<h3 id="other-resources">Other Resources<a class="headerlink" href="#other-resources" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="../sumo/">sumo</a>'s TraCI Server is a part of the plain
  distribution. The source code is located in the folder
  <code>src/traci-server</code>.</li>
</ul>
<h2 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h2>
<ul>
<li>Axel Wegener, Michal Piorkowski, Maxim Raya, Horst Hellbrück, Stefan
  Fischer and Jean-Pierre Hubaux. TraCI: An Interface for Coupling Road
  Traffic and Network Simulators. Proceedings of the 11th
  Communications and Networking Simulation Symposium, April 2008.
  <a href="https://dl.acm.org/citation.cfm?doid=1400713.1400740">Available at ACM Digital Library</a></li>
<li>Axel Wegener, Horst Hellbrück, Christian Wewetzer and Andreas Lübke:
  VANET Simulation Environment with Feedback Loop and its Application
  to Traffic Light Assistance. Proceedings of the 3rd IEEE Workshop
  on Automotive Networking and Applications, New Orleans, LA, USA, 2008.
  <a href="https://doi.org/10.1109/GLOCOMW.2008.ECP.67">Available at IEEEXplore</a></li>
</ul>
<h2 id="performance">Performance<a class="headerlink" href="#performance" title="Permanent link">&para;</a></h2>
<p>Using TraCI slows down the simulation speed. The amount of slow-down
depends on many factors:</p>
<ul>
<li>number of TraCI function calls per simulation step</li>
<li>types of TraCI functions being called (some being more expensive
  than others)</li>
<li>computation within the TraCI script</li>
<li>client language</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please always consider using <a href="../Libsumo/">libsumo</a> if performance is important.
While it is much faster in general, not all optimizations mentioned below are applicable to libsumo as well.
Especially subscriptions might even turn out to be slower.</p>
</div>
<h3 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h3>
<p>As an example use-case consider retrieving the x,y position of each
vehicle during every simulation step (using the python client):</p>
<pre><code class="language-py">while traci.simulation.getMinExpectedNumber() &gt; 0:
    for veh_id in traci.vehicle.getIDList():
         position = traci.vehicle.getPosition(veh_id)
    traci.simulationStep()
</code></pre>
<ul>
<li>This script is able to process about 25000 vehicles per second.</li>
<li>The same value retrieval can also be sped up to 50000 vehicles per
  second by using
  <a href="Object_Variable_Subscription/">subscriptions</a>:</li>
</ul>
<pre><code class="language-py">while traci.simulation.getMinExpectedNumber() &gt; 0:
    for veh_id in traci.simulation.getDepartedIDList():
        traci.vehicle.subscribe(veh_id, [traci.constants.VAR_POSITION])
    positions = traci.vehicle.getAllSubscriptionResults()
    traci.simulationStep()
</code></pre>
<p>When using this script on the <a href="../Data/Scenarios/#bologna">Bologna
scenario</a> (9000 vehicles, 5000
simulation steps) the following running times were recorded:</p>
<ul>
<li>without TraCI 8s</li>
<li>plain position retrieval 90s</li>
<li>retrieval using subscriptions 42s</li>
</ul>
<p>The C++ client performance is higher:</p>
<ul>
<li>plain position retrieval 80s</li>
<li>retrieval using subscriptions 28s</li>
</ul>
<h2 id="current-and-future-development">Current and Future Development<a class="headerlink" href="#current-and-future-development" title="Permanent link">&para;</a></h2>
<p>Historically TraCI used a different (single byte) command ID for every
domain (induction loops, vehicle etc.) where the more significant half
of the byte denotes the command (get, set, subscribe, ...) and the
lesser significant the domain itself. To allow more than the 16 domains
resulting from this split, the most significant bit (which was unused
until version 1.7.0 because there were only 7 commands) is now used for the domain
as well (and only three for the command). This allows for 28 domains
because four general commands (like SIMSTEP) block some available combinations.
Currently there are only four possible domains left.</p>
<p>Furthermore after the invention of libsumo
some parts of the TraCI interface are so generic that it may be not so
hard to invent a wrapper with Apache Kafka or Google protocol buffers
which could in the long run replace the need for all the byte fiddling
and the different hand crafted clients.</p>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="output-files-are-not-closed">Output files are not closed.<a class="headerlink" href="#output-files-are-not-closed" title="Permanent link">&para;</a></h3>
<p>This problem occurs if the client tries to access the output while
the simulation is still closing down. This can be solved by letting
the client wait for the simulation to shut down. The bug report was #524</p>
<h3 id="obsolete-apis">Obsolete APIs<a class="headerlink" href="#obsolete-apis" title="Permanent link">&para;</a></h3>
<p>There used to be two "generations" of <a href="./">TraCI</a>
commands. The first one mainly uses an internal mapping between the
string-typed IDs used in <a href="../sumo/">sumo</a> and an external
representation of these which is int-based. The mapping was done
internally (within <a href="./">TraCI</a>).
The second "generation", the current one uses string-IDs equal to
those <a href="../sumo/">sumo</a> reads. If you are bound to the first
generation API (for instance if you want to use TraNS) you can only
use <a href="../sumo/">sumo</a> up to version 0.12.3. See
<a href="../FAQ/">FAQ</a> about obtaining an old version.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>