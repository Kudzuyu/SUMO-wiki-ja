# コンピュータスキル

## はじめに

SUMOを使うためにはいくつか基本的なコンピュータスキルが必要になります(Linuxユーザはおそらく親しみがあるでしょうから、以下の説明はMS-Windowsを示します)

## [テキストエディタ](https://ja.wikipedia.org/wiki/%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF)の使いかた

正確な動作のためにSUMOでは設定ファイルとデータファイルが必要です。
こうしたファイルはテキストファイルを使って作成/編集します。

Windowsでは次のようにして基本的なテキストエディタを開きます。

```
スタート->Windowsアクセサリ->メモ帳

もしくは`Win` + `R` キーを押し，`notepad`
```


メモ帳は極初歩的なテキストエディタです。
より多くの機能を備えたエディタに移ることで、快適性と生産性を上げることができます。
[Notepad++](https://notepad-plus-plus.org/) ([日本語での紹介](https://forest.watch.impress.co.jp/library/software/notepadplusp/))や[vim](https://vim-jp.org/)、あるいは「テキストエディタ 比較」などで検索してみるのがいいでしょう。

!!! note
    SUMOが扱うファイルは慣習にしたがって、`.xml`で終わるものと、`.sumofg`に分かれます。
    Windowsのエクスプローラでダブルクリックしても望んだテキストエディタで開くとは限りません。
    テキストエディタの方からファイルを開くか、ファイルの関連付けを変更する方法を[学んで](https://www.google.com/search?client=firefox-b-d&q=windows+%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB+%E9%96%A2%E9%80%A3%E4%BB%98%E3%81%91)ください

!!! note "訳注"
    原文ページでは[comparison of text editors](http://en.wikipedia.org/wiki/Comparison_of_text_editors)が紹介されていますが、日本語ページがないため消しました。

## フォルダとファイルを使いこなす

SUMOで必要な様々なファイルを扱うためには、そうしたファイルをシステム中から見つけださなければなりません。
初心者はWindowsエクスプローラの使い方を[ここ](https://www.google.com/search?ei=JUn2XPv4D4WLr7wPkJqtMA&q=windows+%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%97%E3%83%AD%E3%83%BC%E3%83%A9+%E4%BD%BF%E3%81%84%E6%96%B9&oq=windows+%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%97%E3%83%AD%E3%83%BC%E3%83%A9+%E4%BD%BF%E3%81%84%E3%81%8B%E3%81%9F&gs_l=psy-ab.1.0.0i4i30.1528.5573..6864...1.0..1.179.1782.4j11......0....1..gws-wiz.......0i71j0i67j0j0i4j0i30j0i8i30j33i21j0i8i4i30.sP9udMlVohU)から調べてください。

## コマンドラインからのプログラム実行

SUMOは多くのプログラムから構成されています。
sumo-gui.exeから起動する[SUMO-GUI]()のみがグラフィカルユーザーインターフェース(GUI)を持っています。
その他の全てのプログラムは**コマンドライン**から起動する必要があります。

はじめにコマンドラインを開く必要があります。
Windowsでは"**cmd.exe**"(Win+rキーを押し、出てきた画面にcmd.exeと入力)を起動します。
黒いウィンドウが開いたら、それがコマンドラインです。
バージョン0.12.3からは**start-commmand-line.bat**(下の説明も参照)をダブルクリックすることで、使いやすく環境変数が設定されたコマンドラインを開くことができます(SUMOの実行ファイルのあるフォルダに一緒に入っています)。
Linuxを使っているなら、ターミナルを開いてください(例: **xterm**)

コマンドラインからはプログラムの名前とそのプログラムのオプションを書くことでプログラムを実行することができます。
これは自動化しやすく、繰り返しのあるタスクにはGUIよりも便利です。
コマンドは以下のようなものです。

```
netconvert --node-files=hello.nod.xml --edge-files=hello.edg.xml --output-file=hello.net.xml 
```

*netconvert*はプログラムの名前であり残りのコマンドはそのプログラムのオプションを設定しています。

下の節を見ればSUMOを始めるのには十分でしょう。
コマンドラインに関するより詳しい情報については[コマンドラインアプリケーションの使い方](./Using_the_Command_Line_Applications)を見てください。

!!! note "訳注"
    原文にはコマンドラインの詳しい使いかたとしていくつかリンクが載っていますが、リンク切れなものや日本語版がないとの理由から省略しました。

### SUMO 0.12.3以降

SUMOリリース(ダウンロードした全てのSUMOファイル/フォルダ)のなかに *bin*というディレクトリがあります。
このディレクトリには*start-command-line.bat*というバッチファイルが含まれています。
このバッチファイルはコマンドラインを起動し、SUMOプログラムを起動させることができるか確認してくれます。

1. *start-command-line.bat*をダブルクリック
1. [cdコマンド](https://eng-entrance.com/cmd-usage)を使って、設定ファイルやネットワークファイルのあるディレクトリに行く
1。 以下のようなコマンドを入力しEnterキーを押す

```
netconvert --node-files=hello.nod.xml --edge-files=hello.edg.xml --output-file=hello.net.xml 
```

!!! note "訳注"
    原文ページには0.12.2以前のバージョンでの方法が書かれていますが、リリースが5年以上前なこともあり、すでに使っている人がほとんどいないだろうと考え、今のところ翻訳していません。

## SUMO_HOME

多くの[ツール]()を使うために、`SUMO_HOME`という環境変数がSUMOがインストールされた基底のディレクトリに設定されている必要があります。
基底のディレクトリとは*bin*と*tools*のあるフォルダのことです。
環境変数の設定についての説明は下の方を参照してください。

!!! node "注"
    この値は[入力のバリデーション]()において[xsdスキーマファイル]()を見つけるのにも使われます。
    値が設定されていない場合、スキーマファイルはインターネットからダウンロードされ、[sumo.dlr.de](http://sumo.dlr.de/)サーバーに接続できない場合、保管されます。


## パスの設定

コマンドラインからプログラムを快適に動かすためには、`PATH`と`SUMO_HOME`を設定しなくてはいけません。

### Windows

!!! note
    SUMOを.msiインストーラによってWindowsにインストールした場合、この設定は自動的に行なわれます

1. マイコンピュータを右クリックし、プロパティをクリック
1. 詳細設定タブをクリック
1. 環境変数をクリック
1. ユーザー環境変数の欄でPATH(またはPath)を選択し編集をクリック。見つからない場合は 「新規」ボタンから作成
1. PATHの値に`;C:\Program Files\sumo-1.2.0\bin`を追加(元からある値は残す)
1. ユーザー環境変数の欄でSUMO_HOMEを選択し編集をクリック。見つからない場合は 「新規」ボタンから作成
1. `C:\Program Files\sumo-1.2.0`をSUMO_HOMEの値に設定

!!! note
    `C:\Program Files\sumo-1.2.0`は自身のsumoディレクトリにおきかえてください

!!! caution
    新しいパスの設定を適用するには、全ての開かれているコマンドラインウィンドウを開きなおす必要があります。

### Linux

#### 一時的な解決策

環境変数を一時的に設定するには、次のコマンドをターミナルに打ちこんでください。

```
export SUMO_HOME="/your/path/to/sumo/"
```

これは現在のシェルにおいて実行される全てのプログラム、スクリプトで使われる環境変数を設定します。
これは他のシェルセッションや現在のシェルの終了後には影響を与えません。

!!! note
    `/your/path/to/sumo/`は自身のsumoディレクトリに置きかえてください

#### 永続的な解決策

環境変数を永続的に設定するには以下のステップを踏んでください。

1. ファイラーを開き `/home/YOUR_NAME/`フォルダに行く
1. .bashrcファイルをテキストエディタで開く(ファイラーで隠しファイルを見えるようにする必要があるかもしれません)
1. `export SUMO_HOME="/your/path/to/sumo/"`をファイルの適当な場所に書きこみ、保存する(元から書きこまれている内容は消さない)
1. コンピュータを再起動する(または、一度ログアウトしてから再ログインする)。

こうすることで、現在のユーザーアカウントのもとで開かれるどのコマンドラインプログラムでも環境変数が使えるようになります。

!!! note
    `YOUR_NAME`は自身のユーザーネームに、`/your/path/to/sumo/`は自身のsumoディレクトリに置きかえてください


#### パッケージ版SUMO

パッケージマネージャ(例: apt)からSUMOをインストールした場合、SUMO_HOMEの値はtoolsフォルダの含まれているフォルダになります。
Ubuntuでは以下の場所です。

```
/usr/share/sumo
```

### macOS

まず、現在使用しているシェル（**bash** または **zsh**）を確認する必要があります。ターミナルで `ps -p $$` と入力してください（これにより、CMD の下に使用中のシェルが表示されるはずです）。macOS Catalina のデフォルトシェルは **zsh** です。
#### ZSH用

ターミナルで以下の手順を実行してください:
```
open ~/.zshrc
```
これにより*.zshrc*ファイルがTextEditで開きます。その文書に次の行を追加してください:
```
export SUMO_HOME="/your/path/to/sumo"
```
`/your/path/to/sumo` を、sumo の ***実際の*** パスに置き換えてください。
TextEdit でその文書を保存します。次に、変更を適用するためにターミナルで以下を入力します:
```
source ~/.zshrc
```
をターミナルに入力します。これで完了です！環境変数が正しく設定されたかテストするには、ターミナルに以下を出力してください：
```
echo $SUMO_HOME
/usr/share/sumo
```
すると、最近追加されたパスが表示されるはずです。

#### for Bash

ターミナルで以下の手順を実行してください:
```
open ~/.bash_profile
```
これにより*.bash_profile*ファイルがテキストエディタで開きます。その文書に次の行を追加してください:
```
export SUMO_HOME="/your/path/to/sumo"
```
`/your/path/to/sumo` を、sumo の ***実際の*** パスに置き換えてください。
TextEditでその文書を保存します。次に、変更を適用するためにターミナルで以下を入力します：
```
source ~/.bash_profile
```
これで完了です！環境変数が正しく設定されたか確認するには、ターミナルで以下を実行して出力します：
```
echo $SUMO_HOME
```
これにより、追加したパスが表示されるはずです。
## コマンドラインの小技

### コピー/ペースト

コマンドラインでは標準的なコピー/ペーストに関するショートカットが効きません。
コピー/ペーストのためにはコマンドラインウィンドウを右クリックする必要があります。
利便性向上のためには、コマンドラインウィンドウのタイトルバーをクリックして、「プロパティ」を選択し、「オプション」タブで「簡易編集モード」にチェックを入れます。
こうすることで、マウスの左ボタンでテキストを選択し右クリックでコピーすることができるようになります。
もう一度右クリックすることで、コピーしたテキストをペーストすることができます。

### 過去のコマンドの繰り返し

上下矢印キーを使うことで、以前入力されたコマンドの履歴をたどることができます。
表示されたコマンドを書きなおしたり、単にenterキーを押すことでもう一度そのコマンドを実行できます。
