
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kudzuyu.github.io/SUMO-wiki-ja/Developer/CodeStyle/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>CodeStyle - SUMO wiki ja</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:600,800">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#automated-style-checking" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../.." title="SUMO wiki ja" class="md-header__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../images/sumo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SUMO wiki ja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              CodeStyle
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  ドキュメント

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Downloads/" class="md-tabs__link">
        
  
  
    
  
  ダウンロード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Publications/" class="md-tabs__link">
        
  
  
    
  
  出版物

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SUMO wiki ja" class="md-nav__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../images/sumo-logo.png" alt="logo">

    </a>
    SUMO wiki ja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドキュメント
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ダウンロード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    出版物
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="automated-style-checking">Automated style checking<a class="headerlink" href="#automated-style-checking" title="Permanent link">&para;</a></h1>
<p>The easiest way to enforce the SUMO code style for C++ and Python
is to enable the <a href="../GitStuff/#git_commit_hooks">pre-commit checks</a>.</p>
<h1 id="c-code">C++ Code<a class="headerlink" href="#c-code" title="Permanent link">&para;</a></h1>
<p>We try to have the code compatible to a wide range of C++11 compatible
compilers and test every commit / pull request against <a href="https://github.com/eclipse-sumo/sumo/actions">gcc and clang on
macOS and Linux</a>, and <a href="https://ci.appveyor.com/project/eclipsewebmaster/sumo">Visual
Studio 2015 - 2022 on
Windows</a>. For the
C++ code we use <a href="https://astyle.sourceforge.net/">AStyle</a> to keep
indentation and other whitespace usage consistent throughout the
project. In order to make your code appear same as the original SUMO
code use the following call to AStyle (or execute
tools/build_config/checkStyle.py --fix &lt;FILE_NAME&gt; before committing):</p>
<pre><code class="language-sh">astyle --style=java --unpad-paren --pad-header --pad-oper --add-brackets --indent-switches --align-pointer=type -n &lt;FILE_NAME&gt;
</code></pre>
<p>Still, there are several other things you should keep in mind (The
<a href="https://google.github.io/styleguide/cppguide.html">Google C++ Style
Guide</a> is a good read
as well):</p>
<h2 id="templates">Templates<a class="headerlink" href="#templates" title="Permanent link">&para;</a></h2>
<p>Use the following templates for your files:</p>
<ul>
<li><a href="../CppFileTemplate/">Developer/CppFileTemplate</a></li>
<li><a href="../HFileTemplate/">Developer/HFileTemplate</a></li>
</ul>
<h2 id="whitespace">Whitespace<a class="headerlink" href="#whitespace" title="Permanent link">&para;</a></h2>
<ul>
<li>Never use <em>tab stop</em>. Always use 4 <em>spaces</em> for indentation. In
  Visual Studio <em>tab stop</em> can be disabled in Tools/Options/Text
  Editor/All languages/Tabs.</li>
</ul>
<h2 id="class-names">Class Names<a class="headerlink" href="#class-names" title="Permanent link">&para;</a></h2>
<ul>
<li>All class names must start with capital letter</li>
<li>The first capital letters of a class should be used to indicate
  their module (<strong>NB</strong>Edge -&gt; <strong>N</strong>et <strong>B</strong>uild module,
  <strong>MS</strong>ChargingStation -&gt; <strong>M</strong>icro <strong>S</strong>imulation module</li>
<li>If a class name is composed of multiple words, every word must start
  with capital letter (Micro simulation charging station -&gt;
  <strong>MSC</strong>harging<strong>S</strong>tation)</li>
<li>please do not arbitrarily introduce new namespaces</li>
</ul>
<h2 id="variable-names">Variable Names<a class="headerlink" href="#variable-names" title="Permanent link">&para;</a></h2>
<ul>
<li>Variables used within methods should be named using "camel-caps",
  f.e. "currentCarVelocity"</li>
<li>Member variables should additionally have the prefix "my", f.e.
  "myMaximumVehicleVelocity"</li>
<li>try not to abbreviate variable names (myMaximumVehicleVelocity
  instead of myMVV)</li>
<li>give names to variables which describe its purpose within the
  context</li>
<li>do not reuse variables for different purposes</li>
</ul>
<h2 id="enums">Enums<a class="headerlink" href="#enums" title="Permanent link">&para;</a></h2>
<ul>
<li>All enum names must start with capital letter, and If their name is
  composed of multiple words, every word must start with capital
  letter</li>
<li>Every definition must be written using capital letters (SumoXMLTag {
  <strong>SUMO_TAG_EDGE</strong>, <strong>SUMO_TAG_LANE</strong>, ... } )</li>
</ul>
<h2 id="encoding">Encoding<a class="headerlink" href="#encoding" title="Permanent link">&para;</a></h2>
<p>Only use the plain <a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>
characters in <em>cpp</em> and <em>h</em> files. (0x20 - 0x7E). If you need to convey
extended character information use TeX or HTML notation instead.</p>
<h2 id="include-statements">#include-statements<a class="headerlink" href="#include-statements" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>do not use backslashes (\)!</strong> use slashes (/) only</li>
<li><strong>do not use absolute paths!</strong>; something like #include
  "/home/daniel/mylibs/include_me.h" will never work somewhere else!
  Use relative paths and tell the compiler where the other libraries
  may be found. If you have problems on this, please tell us, we'll
  write some further documentation!</li>
<li>in general we mention the standard library includes first (like
  #include &lt;vector&gt;), then the includes of libraries used by SUMO
  (FOX / Xerces) and later our own headers</li>
<li>brackets ("&lt;" and "&gt;") are preferred for files not residing in the
  same directory, while quotation marks are usually used for files in
  the same directory.</li>
</ul>
<h2 id="using-namespace--statements">"using namespace ..."-statements<a class="headerlink" href="#using-namespace--statements" title="Permanent link">&para;</a></h2>
<ul>
<li>Avoid them whenever possible and especially <strong>do not use "using
  namespace ..."-statements within the .h-files!</strong> It's possible that
  an included library tries to use a different implementation - who
  knows? Using a "using namespace ..."-statement within your .h-file
  may yield in an unexpected behavior.</li>
</ul>
<h2 id="throw-declarations">Throw-declarations<a class="headerlink" href="#throw-declarations" title="Permanent link">&para;</a></h2>
<ul>
<li>We are not using throw-declarations, see:
  <a href="http://www.gotw.ca/publications/mill22.htm">http://www.gotw.ca/publications/mill22.htm</a> (thanks to Björn
  Hendriks); we'll remove the existing ones subsequently.</li>
</ul>
<h2 id="object-handling">Object Handling<a class="headerlink" href="#object-handling" title="Permanent link">&para;</a></h2>
<ul>
<li>If the structure you are implementing has an id, then derive the
  object from <code>Named</code> (<strong><em>&lt;SUMO_HOME&gt;</em></strong>/src/utils/common/Named.h). This class supports
  the <code>std::string getID()</code>-method.</li>
<li>If you want to store something in a map pointing from string ids to
  object instances, then use <code>NamedObjectCont</code>
  (<strong><em>&lt;SUMO_HOME&gt;</em></strong>/src/utils/common/NamedObjectCont.h).</li>
</ul>
<h2 id="integer-types">Integer Types<a class="headerlink" href="#integer-types" title="Permanent link">&para;</a></h2>
<ul>
<li>Use simple int whenever possible. There are probably lots of places
  in the sumo code which rely on the fact that this has at least 32
  bits, so you may too.</li>
<li>Try to avoid unsigned ints whenever possible. It is sometimes not
  possible when calling Xerces-C and GL functions or using
  std::string::npos but try to limit it to those cases.</li>
<li>If you need at least 64 bit, use long long int.</li>
</ul>
<h2 id="conditionals">Conditionals<a class="headerlink" href="#conditionals" title="Permanent link">&para;</a></h2>
<ul>
<li>Do not use redundant condition checks. Example: <strong><em>if</em></strong>
  <em>(myCondition)</em> instead of <strong><em>if</em></strong> (<em>myCondition</em> == <strong><em>true</em></strong>)</li>
</ul>
<h2 id="loops">Loops<a class="headerlink" href="#loops" title="Permanent link">&para;</a></h2>
<ul>
<li>Use the C++ 11 range loop syntax whenever possible. Example:
  <strong><em>for</em></strong> <em>(element&amp; it : myContainer)</em> instead of <strong><em>for</em></strong>
  <em>(container::iterator it = myContainer.begin(); it !=
  myContainer.end(); it++)</em>. Still try to name the element type
  explicitly instead of using "auto" at least when iterating over
  lists / vectors.</li>
</ul>
<h1 id="python-code">Python Code<a class="headerlink" href="#python-code" title="Permanent link">&para;</a></h1>
<p>We try to adhere to the <a href="https://www.python.org/dev/peps/pep-0008/">PEP 8 Style
Guide</a> and use
<a href="https://github.com/hhatto/autopep8">autopep8</a> and
<a href="https://github.com/PyCQA/flake8">flake8</a> to check this. If you have
both modules installed, you can run <a href="../../Tools/Build/#checkstylepy">tools/build_config/checkStyle.py
&lt;FILENAME&gt;</a> to check this and also
fix some of the errors. We run both tools without any special options
except for the line length which we limit to 120.</p>
<p>Please remember to make your file executable if (and only if) the file
should be executable (i.e. is not a module to be imported by others).
Windows users please follow this
<a href="https://stackoverflow.com/questions/21691202/how-to-create-file-execute-mode-permissions-in-git-on-windows">recipe</a>.
Executable files should also contain a so called shebang in the first
line:</p>
<pre><code>!#/usr/bin/env python
</code></pre>
<p>If your script needs Python 3 then state python3 there.</p>
<h2 id="python2--python3-compatibility">Python2 / Python3 compatibility<a class="headerlink" href="#python2--python3-compatibility" title="Permanent link">&para;</a></h2>
<p>Our main development focuses on Python 3.7 and later but we strive for
Python 2 compatibility. When writing or editing scripts, keep the
following in mind:</p>
<ul>
<li>use <em>print</em> as a function (<code>from __future__ import print_function</code>)</li>
<li>use <em>items</em> instead of iteritems, which will return a list under
  Python 2.7 and an iterator in Python 3 (<code>for item in dict.items()</code>)</li>
<li>use <em>values</em> instead of <em>itervalues</em>, which will return a list under
  Python 2.7 and an iterator in Python 3 (<code>for val in dict.values()</code>)</li>
<li>use <em>//</em> instead of <em>/</em> for integer division because <em>/</em> will do a
  floating point division under Python 3 (<code>4/3 = 1.3333333</code>)</li>
<li>the floating point division with <em>/</em> can be included in Python 2 by (<code>from __future__ import division</code>)</li>
<li>while iterating over unsorted lists or iterators Python 2 and Python
  3 do not work in the same order. Therefore add a explicit <em>sorted</em>
  before iteration when you write e.g. a xml file (<code>for item in sorted(list)</code>)</li>
<li>use the argparse library instead of optparse (which is deprecated).
  The use of most functions stayed the
  same, only some names differ. For further information please check
  <a href="https://docs.python.org/3/library/argparse.html">https://docs.python.org/3/library/argparse.html</a></li>
<li>if you want to use different code for Python 2 and Python 3, which
  can be necessary since not all libraries exist for both versions,
  you can use a simple if else statement with the PY3 boolean defined
  by(<code>PY3 = sys.version_info &gt; (3,)</code>)</li>
<li>use byte type in Python 3 wherever you use binary data and string
  type wherever you used unicode strings before. This can be made by
  if else statements using the PY3 boolean. See a list for the
  different methods possible on bytes and strings at
  <a href="https://docs.python.org/3/howto/pyporting.html#text-versus-binary-data">https://docs.python.org/3/howto/pyporting.html#text-versus-binary-data</a></li>
</ul>
<p>For further information about possible error sources and difficulties
resulting in Python 3 compatibility see also
<a href="http://python3porting.com/">http://python3porting.com/</a> and
<a href="https://docs.python.org/3/howto/pyporting.html">https://docs.python.org/3/howto/pyporting.html</a></p>
<h2 id="template">Template<a class="headerlink" href="#template" title="Permanent link">&para;</a></h2>
<p>Use the following template for your files:</p>
<ul>
<li><a href="../PythonFileTemplate/">Developer/PythonFileTemplate</a></li>
</ul>
<h1 id="line-endings-and-keyword-replacement">Line endings and keyword replacement<a class="headerlink" href="#line-endings-and-keyword-replacement" title="Permanent link">&para;</a></h1>
<p>We enforce special line endings for the following file types (overriding
core.autocrlf settings of git) using <a href="https://github.com/eclipse-sumo/sumo/blob/main/.gitattributes"><strong><em>&lt;SUMO_HOME&gt;</em></strong>/.gitattributes</a>:</p>
<ul>
<li>LF for</li>
<li>source files (".h", ".cpp", ".py", ...),</li>
<li>Test files (".xml", ".prog", ".complex", ".dfrouter",
    ".duarouter", ".jtrrouter", ".netconvert", ".sumo", ".meso",
    ...)</li>
<li>CRLF for Windows only files (".bat", ".props", ".vcxproj",
  ".filters", ...)</li>
</ul>
<p>Git has no equivalent to the svn:keywords property, so we do not use
the $Id$ keyword any longer.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>