
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kudzuyu.github.io/SUMO-wiki-ja/Driver_State/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Driver State - SUMO wiki ja</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:600,800">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href=".." title="SUMO wiki ja" class="md-header__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../images/sumo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SUMO wiki ja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Driver State
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  ドキュメント

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Downloads/" class="md-tabs__link">
        
  
  
    
  
  ダウンロード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../Publications/" class="md-tabs__link">
        
  
  
    
  
  出版物

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SUMO wiki ja" class="md-nav__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../images/sumo-logo.png" alt="logo">

    </a>
    SUMO wiki ja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドキュメント
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ダウンロード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    出版物
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h1>
<p>The driver state provides a generic mechanism to induce imperfection
into car-following and lane change models. Although errors may enter the
driving process at many stages [see Figure 1], SUMO only applies
errors at the perception stage, see
<a href="#modeling_of_perception_errors">below</a> for details.</p>
<p><img alt="" src="../images/DriverErrors.png" title="Driver Errors" /></p>
<p><em>Figure 1: Errors in the driving process.</em></p>
<p>Practically, errors are added to the input quantities of the
car-following model's input parameters of spacing and speed difference. For an integration in <a href="../Developer/How_To/Car-Following_Model/">contributed car-following
models</a>, the
<a href="https://github.com/eclipse-sumo/sumo/blob/main/src/microsim/cfmodels/MSCFModel_Krauss.cpp">implementation in the standard
model</a>
can be adopted (see <code>MSCFModel_Krauss::stopSpeed()</code> and
<code>MSCFModel_Krauss::followSpeed()</code>). Currently (SUMO 1.8.0)
it is only implemented for the standard Krauss and IDM.</p>
<h1 id="equipping-a-vehicle-with-a-driver-state">Equipping a Vehicle with a Driver State<a class="headerlink" href="#equipping-a-vehicle-with-a-driver-state" title="Permanent link">&para;</a></h1>
<p>To apply the imperfect driving functionality for a vehicle it is
equipped with a <strong>Driver State Device</strong>, see <a href="../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#devices">the description of
equipment
procedures</a>
(and use <device name><code>=driverstate</code>). The minimal definition required
to equip one vehicle with a Driver State has the following form:</p>
<pre><code class="language-xml">&lt;routes&gt;
    ...
    &lt;vehicle id=&quot;v0&quot; route=&quot;route0&quot; depart=&quot;0&quot;&gt;
        &lt;param key=&quot;has.driverstate.device&quot; value=&quot;true&quot;/&gt;
    &lt;/vehicle&gt;
    ....
&lt;/routes&gt;
</code></pre>
<p>In this case all parameters (<a href="#modeling_of_perception_errors">see below</a>) of the driver state
are set to their default values. The following table gives the full list
of possible parameters for the Driver State Device. Each of these
parameters must be specified as a child element of the form
<code>&lt;param key=&lt;PARAMETER NAME&gt; value=&lt;PARAMETER VALUE&gt;</code> of the
appropriate demand definition element (e.g. <code>&lt;vehicle ... /&gt;</code>, <code>&lt;vType ... /&gt;</code>, or <code>&lt;flow ... /&gt;</code>). See <a href="#modeling_of_perception_errors">Modeling of Perception
Errors</a> for details of the
error dynamics.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>initialAwareness</td>
<td>float</td>
<td>1.0</td>
<td>The initial awareness assigned to the driver state.</td>
</tr>
<tr>
<td>errorTimeScaleCoefficient</td>
<td>float</td>
<td>100.0</td>
<td>Time scale constant that controls the time scale of the underlying error process.</td>
</tr>
<tr>
<td>errorNoiseIntensityCoefficient</td>
<td>float</td>
<td>0.2</td>
<td>Noise intensity constant that controls the noise intensity of the underlying error process.</td>
</tr>
<tr>
<td>speedDifferenceErrorCoefficient</td>
<td>float</td>
<td>0.15</td>
<td>Scaling coefficient for the error applied to the speed difference input of the car-following model.</td>
</tr>
<tr>
<td>headwayErrorCoefficient</td>
<td>float</td>
<td>0.75</td>
<td>Scaling coefficient for the error applied to the distance input of the car-following model.</td>
</tr>
<tr>
<td>freeSpeedErrorCoefficient</td>
<td>float</td>
<td>0.0</td>
<td>Scaling coefficient for the error applied to free driving speed</td>
</tr>
<tr>
<td>speedDifferenceChangePerceptionThreshold</td>
<td>float</td>
<td>0.1</td>
<td>Constant controlling the threshold for the perception of changes in the speed difference</td>
</tr>
<tr>
<td>headwayChangePerceptionThreshold</td>
<td>float</td>
<td>0.1</td>
<td>Constant controlling the threshold for the perception of changes in the distance input.</td>
</tr>
<tr>
<td>minAwareness</td>
<td>float</td>
<td>0.1</td>
<td>The minimal value for the driver awareness (a technical parameter to avoid a blow up of the term <code>1/minAwareness</code>).</td>
</tr>
<tr>
<td>maximalReactionTime</td>
<td>float (s)</td>
<td>original action step length</td>
<td>The value for the driver's actionStepLength attained at minimal awareness. The actionStepLength scales linearly between this and the original value with the awareness between minAwareness and 1.0.</td>
</tr>
</tbody>
</table>
<h2 id="supported-carfollowmodels">Supported carFollowModels<a class="headerlink" href="#supported-carfollowmodels" title="Permanent link">&para;</a></h2>
<p>The following models support the driverstate device:</p>
<ul>
<li>Krauss</li>
<li>IDM</li>
<li>CACC</li>
</ul>
<h1 id="modeling-of-perception-errors">Modeling of Perception Errors<a class="headerlink" href="#modeling-of-perception-errors" title="Permanent link">&para;</a></h1>
<p>An underlying
<a href="https://en.wikipedia.org/wiki/Ornstein%E2%80%93Uhlenbeck_process">Ornstein-Uhlenbeck</a>
process drives the errors which are applied to the inputs of the
car-following model perception. The characteristic time scale and
driving noise intensity of the process are determined by the driver
state awareness, which is meant to function as an interface between the
traffic situation and the driver state dynamics. We have</p>
<ul>
<li><code>errorTimeScale = errorTimeScaleCoefficient*awareness(t)</code></li>
<li><code>errorNoiseIntensity = errorNoiseIntensityCoefficient*(1.-awareness(t))</code></li>
</ul>
<p>The error's state error(t) at time t is scaled and added to input
parameters of the car-following model as follows</p>
<ul>
<li><code>perceivedSpeedDifference = trueSpeedDifference + speedDifferenceError(t)</code>, where <code>speedDifferenceError(t) = speedDifferenceErrorCoefficient*headway(t)*error(t)</code></li>
<li><code>perceivedHeadway = trueHeadway + headwayError(t)</code>, where
  <code>headwayError(t) = headwayErrorCoefficient*headway(t)*error(t)</code></li>
</ul>
<p>Note that the state <code>error(t)</code> of the error process is not directly
scaled with the awareness, which only controls the errors indirectly by
affecting the processes parameters. Further, the scale of the perception
error is assumed to grow linearly with the distance to the perceived
object.</p>
<p>Finally, the driver state induces an update of the input to the
car-following model only if the perceived values have changed to a
sufficient degree. The conditions for updating the car-following input
are:</p>
<ul>
<li>headway: <code>|perceivedHeadway - expectedHeadway| &gt; headwayChangePerceptionThreshold*trueGap*(1.0-awareness)</code></li>
<li>speed difference: <code>|perceivedSpeedDifference - expectedSpeedDifference| &gt; speedDifferenceChangePerceptionThreshold*trueGap*(1.0-awareness)</code></li>
</ul>
<p>Here, the expected quantities are</p>
<ul>
<li><code>expectedHeadway = lastRecognizedHeadway - expectedSpeedDifference*elapsedTimeSinceLastRecognition</code></li>
<li><code>expectedSpeedDifference = lastRecognizedSpeedDifference</code></li>
</ul>
<h1 id="publication">Publication<a class="headerlink" href="#publication" title="Permanent link">&para;</a></h1>
<p>See sectino <em>2.3.1.3 Modelling of a Decreased Post-ToC Driver Performance</em> in 
<a href="https://www.transaid.eu/wp-content/uploads/2017/Deliverables/WP3/TransAID_D3.1_Modelling-simulation-and-assessment-of-vehicle-automations.pdf">TransAID project report: Modelling, simulation and assessment of vehicle
automations and automated vehicles’ driver behaviour in
mixed traffic</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>