
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kudzuyu.github.io/SUMO-wiki-ja/Simulation/SaveAndLoad/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>SaveAndLoad - SUMO wiki ja</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:600,800">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#saving" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../.." title="SUMO wiki ja" class="md-header__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../images/sumo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SUMO wiki ja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SaveAndLoad
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  ドキュメント

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Downloads/" class="md-tabs__link">
        
  
  
    
  
  ダウンロード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Publications/" class="md-tabs__link">
        
  
  
    
  
  出版物

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SUMO wiki ja" class="md-nav__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../images/sumo-logo.png" alt="logo">

    </a>
    SUMO wiki ja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドキュメント
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ダウンロード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    出版物
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#saving-at-fixed-times" class="md-nav__link">
    <span class="md-ellipsis">
      Saving at fixed times
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-periodically" class="md-nav__link">
    <span class="md-ellipsis">
      Saving periodically
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-manually" class="md-nav__link">
    <span class="md-ellipsis">
      Saving manually
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#saving-via-traci" class="md-nav__link">
    <span class="md-ellipsis">
      Saving via TraCI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#further-options" class="md-nav__link">
    <span class="md-ellipsis">
      Further options
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<p>SUMO allows loading and saving simulation state since version 0.18.0.</p>
<h1 id="saving">Saving<a class="headerlink" href="#saving" title="Permanent link">&para;</a></h1>
<h2 id="saving-at-fixed-times">Saving at fixed times<a class="headerlink" href="#saving-at-fixed-times" title="Permanent link">&para;</a></h2>
<p>To save the state at specified times during the simulation add the
option <strong>--save-state.times</strong></p>
<pre><code>sumo --save-state.times TIME1,TIME2,TIME3
</code></pre>
<p>By default the state will be written to files named <em>&lt;PREFIX&gt;_&lt;TIME&gt;&lt;SUFFIX&gt;</em> where <em>&lt;PREFIX&gt;</em> can be set via option <strong>--save-state.prefix</strong> (default <em>state</em>), <em>&lt;TIME&gt;</em> is the simulation time and <em>&lt;SUFFIX&gt;</em> is either one of <em>.xml.gz</em> or <em>.xml</em> as controlled by the option <strong>--save-state.suffix</strong> (default <em>.xml.gz</em>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The file extension '.xml.gz' indicates gzip-compressed xml which can be used directly by all Sumo applications and can also be unzipped with standard file compression tools</p>
</div>
<p>When using the option <strong>--save-state.times</strong>, output files can also be specified by using the
option <strong>--save-state.files</strong></p>
<pre><code>sumo --save-state.files FILE1,FILE2,FILE3
</code></pre>
<p>to set the file names explicitly. In particular if a plain text xml-file
is desired as output (instead of the compressed format .xml.gz) the file names
should be given (with suffix .xml).</p>
<h2 id="saving-periodically">Saving periodically<a class="headerlink" href="#saving-periodically" title="Permanent link">&para;</a></h2>
<p>Alternatively, the option <strong>--save-state.period</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;TIME&gt;</em></a> can be used to save states periodically.
The options <strong>-save-state.prefix</strong> and <strong>--save-state.suffix</strong> apply as described above.</p>
<p>The option <strong>--save-state.period.keep N</strong> can be used to remove all but the last <strong>N</strong> state files.</p>
<h2 id="saving-manually">Saving manually<a class="headerlink" href="#saving-manually" title="Permanent link">&para;</a></h2>
<p><a href="../../sumo-gui/">sumo-gui</a> allows to save state files using the menu option <em>Simulation</em> -&gt; <em>Save</em></p>
<h2 id="saving-via-traci">Saving via TraCI<a class="headerlink" href="#saving-via-traci" title="Permanent link">&para;</a></h2>
<p>The function <code>traci.simulation.saveState(FILENAME</code>) can be used to trigger saving from a script.</p>
<h2 id="further-options">Further options<a class="headerlink" href="#further-options" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>--save-state.rng</strong>: Save random number generator states</li>
<li><strong>--save-state.transportables</strong>: Save person and container states</li>
<li><strong>--save-state.constraints</strong>: Save rail signal constraints</li>
<li><strong>--save-state.precision</strong>: Set decimal precision when saving states</li>
</ul>
<h1 id="loading">Loading<a class="headerlink" href="#loading" title="Permanent link">&para;</a></h1>
<p>The option <strong>--load-state</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;FILE&gt;</em></a> is used to initialize the simulation with the given state
file. It is recommended to start the simulation with the same input
files that were used when saving the state file and set option <strong>--begin</strong> to the
time when the state was saved. Additional files (i.e. more vehicles) can
be added without problems.</p>
<p>When the option <strong>--load-state.offset</strong> is set, all times loaded from the simulation state will
be shifted by the given amount. This can be used to reset the simulation
second to 0 after midnight and still have the loaded vehicles function
properly.</p>
<p>The option <strong>--load-state.remove-vehicles ID1,ID2,...</strong> allows removing vehicles from a loaded state. This opens up
the possibility for re-positioning selected vehicles by inserting them
again with a <em>.rou.xml</em> file.</p>
<h2 id="loading-via-traci">Loading via TraCI<a class="headerlink" href="#loading-via-traci" title="Permanent link">&para;</a></h2>
<p>There are two ways for loading state via TraCI:</p>
<ul>
<li><code>traci.load(['-n', 'net.net.xml', '--load-state', FILENAME])</code>: reloads the whole simulation (which includes reloading the network)</li>
<li><code>traci.simulation.loadState(FILENAME)</code> : clears out all vehicles and persons from the network and then loads the state. (reloading the network is avoided)</li>
</ul>
<p>The second function faster (or much faster) than the first, depending on the size of the network.</p>
<h1 id="details">Details<a class="headerlink" href="#details" title="Permanent link">&para;</a></h1>
<p>Vehicles that have not yet departed are not included in the simulation
state and must be loaded from input files. When loading vehicles from an
input file that are already present in the simulation state, these
vehicles are automatically ignored and loading proceeds without errors.</p>
<h1 id="random-number-generators-rng">Random number generators (RNG)<a class="headerlink" href="#random-number-generators-rng" title="Permanent link">&para;</a></h1>
<p>By default, the state of the <a href="../Randomness/">random number generators</a> is not saved. Thus,
simulations will behave differently from the original after being reloaded from a state.</p>
<p>When setting option <strong>--save-state.rng</strong>, the state of all random number generators will be included in the state and restored upon loading.
Saving this extra state costs about 500Kb. If this overhead is too high it can be reduced by setting a lower value of <strong>--thread-rngs</strong> (default 64).
The value should be no lower than the number of threads used for routing or simulation (<strong>--threads</strong>, <strong>--device.rerouting.threads</strong>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>States which contain the state of the RNG are platform dependent. This means you cannot load a Windows rng state on Linux and vice versa.</p>
</div>
<h1 id="known-issues">Known Issues<a class="headerlink" href="#known-issues" title="Permanent link">&para;</a></h1>
<ul>
<li>flows cannot be loaded from a state file alone (the original route file must be loaded as well)</li>
<li>the internal state of the laneChangeModel is not saved</li>
<li>the internal state of the carFollowModel is not saved (not all models have this).</li>
<li>the exact position within a parkingArea is <a href="https://github.com/eclipse-sumo/sumo/issues/16144">not saved</a></li>
</ul>
<h1 id="older-versions-of-sumo">Older Versions of SUMO<a class="headerlink" href="#older-versions-of-sumo" title="Permanent link">&para;</a></h1>
<p>On versions before 0.18.0 a possible workaround is to run SUMO within a
virtual machine (VM) as the state of a VM can be saved at any time.
Tests with VirtualBox on Linux have shown that SUMO does not run
significantly slower in a VM as directly on the host if enough hardware
resources are assigned to the VM (for example if you run another program
simultaneously to communicate to SUMO via TraCI you should assign enough
CPU-cores to the VM).</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>