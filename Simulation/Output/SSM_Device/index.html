
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kudzuyu.github.io/SUMO-wiki-ja/Simulation/Output/SSM_Device/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>SSM Device - SUMO wiki ja</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/extra.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:600,800">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#equipping-vehicles" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../../.." title="SUMO wiki ja" class="md-header__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../../images/sumo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SUMO wiki ja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SSM Device
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  ドキュメント

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Downloads/" class="md-tabs__link">
        
  
  
    
  
  ダウンロード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../Publications/" class="md-tabs__link">
        
  
  
    
  
  出版物

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="SUMO wiki ja" class="md-nav__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../../images/sumo-logo.png" alt="logo">

    </a>
    SUMO wiki ja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドキュメント
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ダウンロード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    出版物
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#equipping-vehicles" class="md-nav__link">
    <span class="md-ellipsis">
      Equipping vehicles
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-the-network-file" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing the network file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-file" class="md-nav__link">
    <span class="md-ellipsis">
      Output File
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-content-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Output Content Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#encounter-types" class="md-nav__link">
    <span class="md-ellipsis">
      Encounter types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#space-gap-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Space Gap Definitions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conflict-types" class="md-nav__link">
    <span class="md-ellipsis">
      Conflict Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conflict-definitions" class="md-nav__link">
    <span class="md-ellipsis">
      Conflict Definitions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#available-ssms" class="md-nav__link">
    <span class="md-ellipsis">
      Available SSMs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Available SSMs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ttc" class="md-nav__link">
    <span class="md-ellipsis">
      TTC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drac" class="md-nav__link">
    <span class="md-ellipsis">
      DRAC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mdrac" class="md-nav__link">
    <span class="md-ellipsis">
      MDRAC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pet" class="md-nav__link">
    <span class="md-ellipsis">
      PET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#br" class="md-nav__link">
    <span class="md-ellipsis">
      BR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sgap" class="md-nav__link">
    <span class="md-ellipsis">
      SGAP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tgap" class="md-nav__link">
    <span class="md-ellipsis">
      TGAP
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      Output
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#restricting-ssm-device-to-edges-and-junctions" class="md-nav__link">
    <span class="md-ellipsis">
      Restricting SSM Device to Edges and Junctions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traci" class="md-nav__link">
    <span class="md-ellipsis">
      TraCI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visualization-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Visualization Examples
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>SSM Device</h1>

<h2 id="equipping-vehicles">Equipping vehicles<a class="headerlink" href="#equipping-vehicles" title="Permanent link">&para;</a></h2>
<p>A vehicle can be equipped with an SSM Device which logs the conflicts of the vehicle and other traffic participants (currently only vehicles) and corresponding safety surrogate measures. To attach an SSM device to a vehicle, the <a href="../../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#devices">standard device-equipment procedures</a> can be applied using <code>&lt;device name&gt;=ssm</code>.</p>
<p>For instance, a single vehicle can be equipped (with a device parametrized by default values) as in the following minimal example</p>
<pre><code class="language-xml">&lt;routes&gt;
    ...
    &lt;vehicle id=&quot;v0&quot; route=&quot;route0&quot; depart=&quot;0&quot;&gt;
        &lt;param key=&quot;has.ssm.device&quot; value=&quot;true&quot;/&gt;
    &lt;/vehicle&gt;
    ....
&lt;/routes&gt;
</code></pre>
<h2 id="preparing-the-network-file">Preparing the network file<a class="headerlink" href="#preparing-the-network-file" title="Permanent link">&para;</a></h2>
<p>The SSM device makes use of the <a href="../../../Networks/SUMO_Road_Networks/#junctions_and_right-of-way">right-of-way information</a> of the intersections to derive some of the measures. It uses the foe matrix of the right-of-way definition to extract crossing and merging paths. If an intersection is set to <strong>unregulated</strong>, this information is not available and thus e.g. no PET measure can be computed for this intersection.</p>
<h2 id="output-file">Output File<a class="headerlink" href="#output-file" title="Permanent link">&para;</a></h2>
<p>The SSM device generates an output file (one for each vehicle named <code>ssm_&lt;vehicleID&gt;.xml</code> per default, but several vehicles may write to the same file).
To set a custom file name, define <code>&lt;param key="device.ssm.file" value="FILE"/&gt;</code> either for the <code>&lt;vehicle&gt;</code> or its <code>&lt;vType&gt;</code> element.
Alternatively, set option <strong>--device.ssm.file</strong> to let all vehicles write into the same file.</p>
<p>The top level elements of the generated file are</p>
<p><code>&lt;conflict begin="&lt;log-begin-time&gt;" end="&lt;log-end-time&gt;" ego="&lt;equipped-vehicleID&gt;" foe="&lt;opponent-vehicleID&gt;"&gt; ... &lt;/conflict&gt;</code>.</p>
<h2 id="output-content-configuration">Output Content Configuration<a class="headerlink" href="#output-content-configuration" title="Permanent link">&para;</a></h2>
<p>The detail of information given for each conflict and the criteria to qualify an encounter as a conflict (i.e., produce a corresponding <code>conflict</code> element in the output) can be customized by a number of generic parameters to the vehicle or device, resp.. A full parametrization (redundantly assigning the default values, here) could look as follows:</p>
<pre><code class="language-xml">&lt;routes&gt;
    ...
    &lt;vehicle id=&quot;v0&quot; route=&quot;route0&quot; depart=&quot;0&quot;&gt;
        &lt;param key=&quot;has.ssm.device&quot; value=&quot;true&quot;/&gt;
        &lt;param key=&quot;device.ssm.measures&quot; value=&quot;TTC DRAC PET BR SGAP TGAP PPET MDRAC&quot;/&gt;
        &lt;param key=&quot;device.ssm.thresholds&quot; value=&quot;3.0 3.0 2.0 0.0 0.2 0.5 2.0 3.4&quot;/&gt;
        &lt;param key=&quot;device.ssm.range&quot; value=&quot;50.0&quot; /&gt;
        &lt;param key=&quot;device.ssm.mdrac.prt&quot; value=&quot;1.0&quot; /&gt;
        &lt;param key=&quot;device.ssm.extratime&quot; value=&quot;5.0&quot; /&gt;
        &lt;param key=&quot;device.ssm.file&quot; value=&quot;ssm_v0.xml&quot; /&gt;
        &lt;param key=&quot;device.ssm.trajectories&quot; value=&quot;false&quot; /&gt;
        &lt;param key=&quot;device.ssm.geo&quot; value=&quot;false&quot; /&gt;
        &lt;param key=&quot;device.ssm.write-positions&quot; value=&quot;false&quot; /&gt;
        &lt;param key=&quot;device.ssm.write-lane-positions&quot; value=&quot;false&quot; /&gt;
        &lt;param key=&quot;device.ssm.filter-edges.input-file&quot; value=&quot;input_list.txt&quot; /&gt;
        &lt;param key=&quot;device.ssm.exclude-conflict-types&quot; value=&quot;&quot; /&gt;
    &lt;/vehicle&gt;
    ....
&lt;/routes&gt;
</code></pre>
<h2 id="parameters">Parameters<a class="headerlink" href="#parameters" title="Permanent link">&para;</a></h2>
<p>The possible parameters are summarized in the following table</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Remark</th>
</tr>
</thead>
<tbody>
<tr>
<td>measures</td>
<td>list of strings</td>
<td>All available SSMs</td>
<td>This space or comma-separated  list of SSM-identifiers determines, which encounter-specific SSMs are calculated for the equipped vehicle's encounters and which global measures are recorded (see <a href="#available_ssms">below</a>)</td>
</tr>
<tr>
<td>thresholds</td>
<td>list of floats</td>
<td><ul><li>TTC &lt; 3.0[s]</li><li>DRAC &gt; 3.0[m/s^2]</li><li>MDRAC &gt; 3.4[m/s^2]</li><li>PET &lt; 2.0[s]</li><li>BR &gt; 0.0[m/s^2]</li><li>SGAP &lt; 0.2[m]</li><li>TGAP &lt; 0.5[s]</li></ul></td>
<td>This space or comma-separated list of SSM-thresholds determines, which encounters are classified as conflicts (if their measurements exceed a threshold) and thus written to the output file as a <code>&lt;conflict&gt;</code>-element. This list is required to have the same length as the list of measures if given.<br><br><strong>Note:</strong> Currently the global measures are recorded as a single timeline for the whole simulation span and thresholds have only effect insofar a leader is looked for in the distance corresponding to the SGAP and, respectively, TGAP values.</td>
</tr>
<tr>
<td>range</td>
<td>double</td>
<td>50.0 [m]</td>
<td>The devices detection range in meters. Other vehicles are tracked as soon as they are closer than <code>&lt;range&gt;</code> to the equipped vehicle <em>along the road-network</em>. A tree search is performed to find all vehicles up to range upstream and downstream to the vehicle's current position. Further, for all downstream junctions in range, an upstream search for the given range is performed.</td>
</tr>
<tr>
<td>extratime</td>
<td>double</td>
<td>5.0 [s]</td>
<td>The extra time that an encounter is tracked on after not being associated to a potential conflict (either after crossing the conflict area, deviating from a common route, changing lanes, or because vehicles leave the device range, etc.).</td>
</tr>
<tr>
<td>mdrac.prt</td>
<td>double</td>
<td>1.0 [s]</td>
<td>Specifies the perception reaction time for <a href="#mdrac">MDRAC computation</a>.</td>
</tr>
<tr>
<td>file</td>
<td>string</td>
<td>"ssm_&lt;equipped_vehicleID&gt;.xml"</td>
<td>The filename for storing the conflict information of the equipped vehicle. Several vehicles may write to the same file. Conflicts of a single vehicle are written in the order of the log-begin of the encounter.</td>
</tr>
<tr>
<td>trajectories</td>
<td>bool</td>
<td>false</td>
<td>Whether the full time lines of the different measured values shall be written to the output. This includes logging the time values, encounter types, vehicle positions and velocities, values of the selected SSMs, and associated conflict point locations. If turned off (default) only the extreme values for the selected SSMs are written.</td>
</tr>
<tr>
<td>geo</td>
<td>bool</td>
<td>false</td>
<td>Whether the positions in the output file shall be given in the original coordinate reference system of the network (if available).</td>
</tr>
<tr>
<td>write-positions</td>
<td>bool</td>
<td>false</td>
<td>Whether to write the positions (coordinates) to the output.</td>
</tr>
<tr>
<td>write-lane-positions</td>
<td>bool</td>
<td>false</td>
<td>Whether to write the lanes and the positions on the lanes to the output.</td>
</tr>
<tr>
<td>write-na</td>
<td>bool</td>
<td>true</td>
<td>Whether to write conflict data where all values are invalid ("NA").</td>
</tr>
<tr>
<td>filter-edges.input-file</td>
<td>string</td>
<td>-</td>
<td>If defined, only conflicts occurred at the provided edges and junctions are measured. See <a href="#restricting_ssm_device_to_edges_and_junctions">Restricting SSM Device to Edges and Junctions</a></td>
</tr>
<tr>
<td>exclude-conflict-types</td>
<td>list of strings</td>
<td>-</td>
<td>This space or comma-separated list of SSM device conflict type codes determines which conflicts will appear in the output file. Any conflict which has been classified during at least one time step as one of the mentioned types is excluded from the output. Special values <strong>"foe"</strong> (types {3,7,11,13,15}) and <strong>"ego"</strong> (types {2,6,10,12,14}) add predefined sets to the list. The special value 'none' excludes nothing but can be used to silence verbose output</td>
</tr>
</tbody>
</table>
<h2 id="encounter-types">Encounter types<a class="headerlink" href="#encounter-types" title="Permanent link">&para;</a></h2>
<p>Different types of encounters, e.g. crossing, merging, or lead/follow situations, may imply different calculation procedures for the safety measures. Therefore the SSM-device keeps track of these classifications and provides them in the output to allow the correct interpretation of the corresponding values.</p>
<p>The following table lists the different encounter types along with their codes, which will appear in the output file.</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Name</th>
<th>Description</th>
<th><a href="#space_gap_definitions">Space Gap</a></th>
<th>Speed Difference</th>
<th><a href="#conflict_definitions">Conflict Entry Point</a></th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>NOCONFLICT_AHEAD</td>
<td>Foe vehicle is closer than range, but not on a lane conflicting with the ego's route ahead.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font color="lightgray">1</td>
<td><font color="lightgray">FOLLOWING</td>
<td><font color="lightgray">General follow/lead situation (incomplete type, used only internally).</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2</td>
<td>FOLLOWING_FOLLOWER</td>
<td>Ego vehicle is following the foe vehicle.</td>
<td>foeBack - egoFront</td>
<td>egoSpeed - foeSpeed</td>
<td>foeBack</td>
</tr>
<tr>
<td>3</td>
<td>FOLLOWING_LEADER</td>
<td>Foe vehicle is following the ego vehicle.</td>
<td>egoBack - foeFront</td>
<td>foeSpeed - egoSpeed</td>
<td>egoBack</td>
</tr>
<tr>
<td>4</td>
<td>ON_ADJACENT_LANES</td>
<td>Foe vehicle is on a neighboring lane of the ego vehicle's lane, driving in the same direction.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font color="lightgray">5</td>
<td><font color="lightgray">MERGING</td>
<td><font color="lightgray">Ego and foe share an upcoming edge of their routes while the merging point for the routes is still ahead (incomplete type, only used internally).</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>6</td>
<td>MERGING_LEADER</td>
<td>As 5. The estimated arrival at the merge point is earlier for the foe than for the ego vehicle.</td>
<td>foeEntryDist</td>
<td>foeSpeed</td>
<td>mergePoint</td>
</tr>
<tr>
<td>7</td>
<td>MERGING_FOLLOWER</td>
<td>As 5. The estimated arrival at the merge point is earlier for the ego than for the foe vehicle.</td>
<td>egoEntryDist</td>
<td>egoSpeed</td>
<td>mergePoint</td>
</tr>
<tr>
<td>8</td>
<td>MERGING_ADJACENT</td>
<td>As 5. The vehicles' current routes lead to adjacent lanes on the same edge.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font color="lightgray">9</td>
<td><font color="lightgray">CROSSING</td>
<td><font color="lightgray">Ego's and foe's routes have crossing edges (incomplete type, only used internally)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10</td>
<td>CROSSING_LEADER</td>
<td>As 6. The estimated arrival of the ego at the conflict point is earlier than for the foe vehicle.</td>
<td>foeEntryDist</td>
<td>foeSpeed</td>
<td>foeCrossingPoint</td>
</tr>
<tr>
<td>11</td>
<td>CROSSING_FOLLOWER</td>
<td>As 6. The estimated arrival of the foe at the conflict point is earlier than for the ego vehicle.</td>
<td>egoEntryDist</td>
<td>egoSpeed</td>
<td>egoCrossingPoint</td>
</tr>
<tr>
<td><font color="lightgray">12</td>
<td><font color="lightgray">EGO_ENTERED_CONFLICT_AREA</td>
<td><font color="lightgray">The encounter is a possible crossing conflict, and the ego vehicle has entered the conflict area. (Is currently not logged -&gt; TODO)</td>
<td>foeEntryDist</td>
<td>foeSpeed</td>
<td>foeCrossingPoint</td>
</tr>
<tr>
<td><font color="lightgray">13</td>
<td><font color="lightgray">FOE_ENTERED_CONFLICT_AREA</td>
<td><font color="lightgray">The encounter is a possible crossing conflict, and the foe vehicle has entered the conflict area. (Is currently not logged -&gt; TODO)</td>
<td>egoEntryDist</td>
<td>egoSpeed</td>
<td>egoCrossingPoint</td>
</tr>
<tr>
<td>14</td>
<td>EGO_LEFT_CONFLICT_AREA</td>
<td>The encounter has been a possible crossing conflict, but the ego vehicle has left the conflict area.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>15</td>
<td>FOE_LEFT_CONFLICT_AREA</td>
<td>The encounter has been a possible crossing conflict, but the foe vehicle has left the conflict area.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><font color="lightgray">16</td>
<td><font color="lightgray">BOTH_ENTERED_CONFLICT_AREA</td>
<td><font color="lightgray">The encounter has been a possible crossing conflict, and both vehicles have entered the conflict area (auxiliary type, only used internally, is evaluated to BOTH_LEFT_CONFLICT_AREA or to COLLISION).</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>17</td>
<td>BOTH_LEFT_CONFLICT_AREA</td>
<td>The encounter has been a possible crossing conflict, but both vehicle have left the conflict area.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>18</td>
<td>FOLLOWING_PASSED</td>
<td>The encounter has been a following situation, but is not active any more.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>19</td>
<td>MERGING_PASSED</td>
<td>The encounter has been a merging situation, but is not active any more.</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>20</td>
<td>ONCOMING</td>
<td>The vehicles are driving <a href="../../OppositeDirectionDriving/">towards each other on the same lane</a>.</td>
<td>foeFront - egoFront</td>
<td>egoSpeed + foeSpeed</td>
<td>midpoint between vehicles</td>
</tr>
<tr>
<td>111</td>
<td>COLLISION</td>
<td>Collision.</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="space-gap-definitions">Space Gap Definitions<a class="headerlink" href="#space-gap-definitions" title="Permanent link">&para;</a></h2>
<ul>
<li>front: position of front bumper of the vehicle as offset from the start of its lane</li>
<li>back: position of back bumper of the vehicle as offset from the start of its lane</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When ego and foe vehicles are on subsequent lanes, the gaps are computed by adding the distances of the intermediate lanes</p>
</div>
<h2 id="conflict-types">Conflict Types<a class="headerlink" href="#conflict-types" title="Permanent link">&para;</a></h2>
<p>Basically, we distinguish between three types of encounters for two vehicles:</p>
<ul>
<li><strong>Lead/follow situation:</strong> vehicles are passing the same sequence of lanes before and after the conflict point</li>
<li><strong>Crossing situation:</strong> vehicles are passing different sequences of lanes before and after the conflict point</li>
<li><strong>Merging Situation:</strong> vehicles are passing different lanes before the conflict point but the same lane after the conflict point</li>
</ul>
<h2 id="conflict-definitions">Conflict Definitions<a class="headerlink" href="#conflict-definitions" title="Permanent link">&para;</a></h2>
<p>For each conflict there is an entry point. For merging and crossing conflicts there is also an exit point.
The points may be slightly different for both ego and foe vehicle because the point is computed in reference to the vehicle front or rear bumper whereas a collision could happen with another part of the vehicle.</p>
<ul>
<li>entryDist: distance between the front bumper of the vehicle and the entry point along the lane sequence</li>
<li>exitDist for merging and oncoming encounters: entryDist + vehicleLength</li>
<li>exitDist for crossing encounters: entryDist + followerLength + leaderWidth</li>
<li>mergePoint: start of the first common lane of ego and foe vehicle</li>
<li>crossingPoint: point where the lane geometry sequence (center lines) of both vehicles intersects</li>
<li>egoCrossingPoint: crossing point shifted upstream along the ego lanes by half of the foe vehicle width</li>
<li>foeCrossingPoint: crossing point shifted upstream along the foe lanes by half of the ego vehicle width</li>
</ul>
<h2 id="available-ssms">Available SSMs<a class="headerlink" href="#available-ssms" title="Permanent link">&para;</a></h2>
<p>Currently, the following safety surrogate measures are implemented:</p>
<ul>
<li><a href="#ttc">TTC</a> (time to collision)</li>
<li><a href="#drac">DRAC</a> (deceleration rate to avoid a crash)</li>
<li><a href="#pet">PET</a> (post encroachment time)</li>
<li><a href="#mdrac">MDRAC</a> (modified DRAC)</li>
</ul>
<p>Further, the following additional safety-relevant output can be generated, which will not be linked to a specific encounter:</p>
<ul>
<li><a href="#br">BR</a> (brake rate)</li>
<li><a href="#sgap">SGAP</a> (spacing)</li>
<li><a href="#tgap">TGAP</a> (time headway)</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the selection in the device's output, the abbreviations have to be used.</p>
</div>
<p>Please note that some SSMs only apply to a specific encounter or are computed differently for different encounters.
For crossing and merging situations, we consider "expected" entry and exit times with respect to the conflict zone.
For the calculation of those times for the approaching vehicles, we take into account the current deceleration of the
vehicles, if the vehicle is not decelerating, the current speed is extrapolated as a constant (i.e., acceleration is only considered if it is negative).</p>
<p>For some reference to definitions of SSMs see for instance <a href="https://doi.org/10.1016/j.sbspro.2011.08.027">Guido et al. (2011) "Safety performance measures: a comparison between microsimulation and observational data"</a> or <a href="https://doi.org/10.1016/j.iatssr.2017.02.001">Mahmud et al. (2016) "Application of proximal surrogate indicators for safety evaluation: A review of recent developments and research needs"</a>.</p>
<h3 id="ttc">TTC<a class="headerlink" href="#ttc" title="Permanent link">&para;</a></h3>
<p>The time-to-collision is defined for all follow-lead situations for which the follower is faster than the leader. It is given as</p>
<pre><code>TTC = space_gap/speed-difference.
</code></pre>
<p>For a crossing or merging situation the TTC is only considered defined if for the case that the expected conflict area exit time of the vehicle A is larger than the expected conflict area entry time for vehicle B, where A is the vehicle with the smaller expected conflict area entry time. If this is the case the TTC is defined as</p>
<pre><code>TTC = B’s distance to conflict area entry / B’s current speed.
</code></pre>
<h3 id="drac">DRAC<a class="headerlink" href="#drac" title="Permanent link">&para;</a></h3>
<p>For a lead/follow-situation the DRAC (deceleration to avoid a crash) where the follower vehicle's speed is larger than the leader vehicle's speed is defined as</p>
<pre><code>DRAC = 0.5*speed_difference^2/space_gap.
</code></pre>
<p>For a crossing situation the DRAC is considered defined only if the expected conflict area exit time tA for the first vehicle (A) is larger than the <em>linearly extrapolated</em> conflict area entry time for the second vehicle (B). In that case, the DRAC is defined as follows:</p>
<pre><code>DRAC = 2*(speedB - distConflictB/tA)/tA.
</code></pre>
<p>This value is chosen such that constant deceleration with the corresponding rate would imply that B enters the conflict area exactly at time tA, when vehicle A leaves it.</p>
<p>For a merging situation, both variants for the DRAC calculation must be tested and the minimal result should be applied as the appropriate value for the DRAC.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This has still to be implemented, currently only one variant is used.</p>
</div>
<h3 id="mdrac">MDRAC<a class="headerlink" href="#mdrac" title="Permanent link">&para;</a></h3>
<p>A modified indicator of the DRAC called MDRAC considering a perception-reaction-time (PRT) is defined as</p>
<pre><code>MDRAC = 0.5*speed_difference/(TTC - PRT).

</code></pre>
<p>The <code>PRT</code> is configured with param key <code>device.ssm.mdrac.prt</code> or via option <strong>--device.ssm.mdrac.prt</strong> and defaults to a value of <code>1</code> second.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This metric is not fully implemented for all conflict types yet! (only type 0 - 8 are partly tested so far)</p>
</div>
<h3 id="pet">PET<a class="headerlink" href="#pet" title="Permanent link">&para;</a></h3>
<p>For merging and crossing situations, the PET (post encroachment time) is defined as the difference of the leading vehicle's conflict area exit time tA and the following vehicle's conflict area entry time tB:</p>
<pre><code>PET = tB - tA.
</code></pre>
<p>For lead/follow situations, no PET is calculated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some deficiencies of the current implementation state:</p>
<p>1) Currently the geometry of the conflict area is considered simplified, considering crossing lanes to be orthogonal.</p>
<p>2) The merging area is not treated (the "conflict area" for merging conflicts is actually considered as the cross section at the beginning of the common target lane.</p>
<p>3) DRAC calculation for merging conflicts is still incomplete</p>
<p>4) Lateral conflicts for opposite or neighboring lane's traffic are ignored</p>
</div>
<h3 id="br">BR<a class="headerlink" href="#br" title="Permanent link">&para;</a></h3>
<p>The brake rate is recorded at each simulation step. If the vehicle accelerates, a value of 0.0 is logged.</p>
<h3 id="sgap">SGAP<a class="headerlink" href="#sgap" title="Permanent link">&para;</a></h3>
<p>The spacing is measured as the bumper to bumper distance to the ego vehicle's leader minus the vehicle's <a href="../../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#vehicle_types">minGap</a></p>
<h3 id="tgap">TGAP<a class="headerlink" href="#tgap" title="Permanent link">&para;</a></h3>
<p>The time headway to the leading vehicle equals spacing/speed.</p>
<h2 id="output">Output<a class="headerlink" href="#output" title="Permanent link">&para;</a></h2>
<p>The output for an SSM device is written to a file specified by the parameter <code>device.ssm.file</code> in the routes definition file, see <a href="#equipping_vehicles">above</a>.
The extent of output can be controlled by the parameters <code>device.ssm.measures</code> (which SSMs to report) and <code>device.ssm.trajectories</code> (whether to report complete trajectories for vehicles, the tracked SSMs, and the encounter types).</p>
<p>The resulting file contains a root element <code>&lt;SSMLog&gt;</code>, which contains several <code>&lt;conflict&gt;</code> elements and one <code>&lt;globalMeasures&gt;</code> element. Each reported <code>&lt;conflict&gt;</code> corresponds to a tracked encounter, during which an SSM's criticality threshold was exceeded during the simulation. The <code>&lt;globalMeasures&gt;</code> element holds a timeline for all simulated times and the corresponding values for the selected measures, which are not associated to specific conflicts, see <a href="#available_ssms">Available_SSMs</a>.</p>
<p>An example for the contents of an output file:</p>
<pre><code class="language-xml">&lt;SSMLog&gt;
     &lt;conflict begin=&quot;6.50&quot; end=&quot;13.90&quot; ego=&quot;ego1&quot; foe=&quot;foe1&quot;&gt;
         &lt;timeSpan values=&quot;6.50 6.60 6.70 6.80 6.90 7.00 7.10 ...&quot;/&gt;
         &lt;typeSpan values=&quot;10 10 10 10 10 10 10 ...&quot;/&gt;
         &lt;egoPosition values=&quot;98.35,61.20 98.35,60.20 98.35,59.25 ...&quot;/&gt;
         &lt;egoLane values=&quot;NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 ...&quot;/&gt;
         &lt;egoLanePosition values=&quot;59.73 61.12 62.51 63.89 65.28 66.67 68.06 ...&quot;/&gt;
         &lt;egoVelocity values=&quot;0.00,-10.23 0.00,-9.78 0.00,-9.33 ...&quot;/&gt;
         &lt;foePosition values=&quot;76.31,48.35 77.59,48.35 78.82,48.35 ...&quot;/&gt;
         &lt;foeLane values=&quot;WC_0 WC_0 WC_0 WC_0 WC_0 WC_0 WC_0 ...&quot;/&gt;
         &lt;foeLanePosition values=&quot;45.84 47.23 48.62 50.00 51.39 52.78 54.17 ...&quot;/&gt;
         &lt;foeVelocity values=&quot;13.02,0.00 12.57,0.00 12.12,0.00 ...&quot;/&gt;
         &lt;conflictPoint values=&quot;99.23,49.46 99.23,49.46 99.23,49.46 ...&quot;/&gt;
         &lt;TTCSpan values=&quot;1.78 1.74 1.70 1.67 1.63 1.60 1.56 ...&quot;/&gt;
         &lt;minTTC time=&quot;7.40&quot; position=&quot;99.23,49.46&quot; type=&quot;10&quot; value=&quot;1.48&quot; speed=&quot;13.50&quot;/&gt;
         &lt;DRACSpan values=&quot;3.66 3.61 3.56 3.50 3.44 3.37 3.30 ...&quot;/&gt;
         &lt;maxDRAC time=&quot;6.50&quot; position=&quot;99.23,49.46&quot; type=&quot;10&quot;
value=&quot;3.66&quot; speed=&quot;12.95&quot;/&gt;
         &lt;PET time=&quot;9.42&quot; position=&quot;99.23,49.46&quot; type=&quot;17&quot; value=&quot;0.72&quot; speed=&quot;5.12&quot;/&gt;
     &lt;/conflict&gt;
     &lt;conflict begin=&quot;21.50&quot; end=&quot;27.20&quot; ego=&quot;ego1&quot; foe=&quot;foe2&quot;&gt;
         ...
     &lt;/conflict&gt;
     ...
    &lt;globalMeasures ego=&quot;ToC_veh&quot;&gt;
        &lt;timeSpan values=&quot;0.00 0.10 0.20 0.30 0.40 0.50 0.60 0.70 0.80 0.90 1.00 ...&quot;/&gt;
        &lt;positions values=&quot;98.35,61.20 98.35,60.20 98.35,59.25 ...&quot;/&gt;
        &lt;lane values=&quot;NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 NC_0 ...&quot;/&gt;
        &lt;lanePosition values=&quot;0.00 1.39 2.78 4.17 5.56 6.95 8.33 9.72 11.11 12.50 13.89 ...&quot;/&gt;
        &lt;BRSpan values=&quot;0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 0.00 ...&quot;/&gt;
        &lt;maxBR time=&quot;363.20&quot; position=&quot;1850.01,-4.95&quot; value=&quot;5.53&quot;/&gt;
        &lt;SGAPSpan values=&quot;27.50 27.50 27.49 27.45 27.38 27.29 27.17 27.02 26.85 26.65 ...&quot;/&gt;
        &lt;minSGAP time=&quot;365.50&quot; position=&quot;1863.41,-4.95&quot; value=&quot;0.31&quot; leader=&quot;leader&quot;/&gt;
        &lt;TGAPSpan values=&quot;inf 105.77 52.86 35.19 26.33 20.99 17.41 14.85 12.91 11.39 10.16 ...&quot;/&gt;
        &lt;minTGAP time=&quot;365.30&quot; position=&quot;1863.14,-4.95&quot; value=&quot;0.23&quot; leader=&quot;leader&quot;/&gt;
    &lt;/globalMeasures&gt;
&lt;/SSMLog&gt;
</code></pre>
<p>Elements of type <code>&lt;conflict&gt;</code> hold the following information in their child elements:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
<th>Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>timeSpan</td>
<td>values</td>
<td>list of floats</td>
<td>All simulation time points within the duration of the encounter. All other entries of elements with list-type are given with respect to the corresponding time points.</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>typeSpan</td>
<td>values</td>
<td>list of integers (Encounter type codes)</td>
<td>Timeseries of classifications for the tracked encounter.</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>egoPosition</td>
<td>values</td>
<td>list of 2D-coordinates</td>
<td>Timeseries of the ego vehicle's positions (coordinates).</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>egoLane</td>
<td>values</td>
<td>list of strings</td>
<td>Timeseries of the ego vehicle's lane IDs.</td>
<td>--device.ssm.trajectories --device.ssm.write-lane-positions</td>
</tr>
<tr>
<td>egoLanePosition</td>
<td>values</td>
<td>list of floats</td>
<td>Timeseries of the ego vehicle's positions on the lane.</td>
<td>--device.ssm.trajectories --device.ssm.write-lane-positions</td>
</tr>
<tr>
<td>egoVelocity</td>
<td>values</td>
<td>list of 2D-vectors</td>
<td>Timeseries of the ego vehicle's velocity vectors.</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>foePosition</td>
<td>values</td>
<td>list of 2D-coordinates</td>
<td>Timeseries of the foe vehicle positions (coordinates).</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>foeLane</td>
<td>values</td>
<td>list of strings</td>
<td>Timeseries of the foe vehicle's lane IDs.</td>
<td>--device.ssm.trajectories --device.ssm.write-lane-positions</td>
</tr>
<tr>
<td>foeLanePosition</td>
<td>values</td>
<td>list of floats</td>
<td>Timeseries of the foe vehicle's positions on the lane.</td>
<td>--device.ssm.trajectories --device.ssm.write-lane-positions</td>
</tr>
<tr>
<td>foeVelocity</td>
<td>values</td>
<td>list of 2D-vectors</td>
<td>Timeseries of the foe vehicle's velocity vectors.</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>conflictPoint</td>
<td>values</td>
<td>list of 2D-coordinates</td>
<td>Timeseries of the (eventually extrapolated) coordinates of the conflict point. The <em>conflict</em> point is taken as the respective <em>entry point to the conflict area</em>.</td>
<td>--device.ssm.trajectories</td>
</tr>
<tr>
<td>TTCSpan</td>
<td>values</td>
<td>list of floats</td>
<td>Timeseries of the calculated TTC values. May contain entries 'NA' corresponding to times, where TTC is not defined.</td>
<td>--device.ssm.trajectories --device.ssm.measures "TTC"</td>
</tr>
<tr>
<td>DRACSpan</td>
<td>values</td>
<td>list of floats</td>
<td>Timeseries of the calculated DRAC values. May contain entries 'NA' corresponding to times, where DRAC is not defined.</td>
<td>--device.ssm.trajectories --device.ssm.measures "DRAC"</td>
</tr>
<tr>
<td>minTTC</td>
<td>time</td>
<td>float</td>
<td>Time point of the minimal measured value for the TTC.</td>
<td>--device.ssm.measures "TTC"</td>
</tr>
<tr>
<td></td>
<td>position</td>
<td>2D-coordinate</td>
<td>Coordinate of the corresponding conflict point.</td>
<td>--device.ssm.measures "TTC"</td>
</tr>
<tr>
<td></td>
<td>type</td>
<td>integer (Encounter type code)</td>
<td><a href="#encounter_types">Type code</a> of the corresponding encounter type. (Defines the variant of <a href="#ttc">TTC-calculation</a>.)</td>
<td>--device.ssm.measures "TTC"</td>
</tr>
<tr>
<td></td>
<td>value</td>
<td>float &gt;= 0</td>
<td>The minimal measured TTC-value.</td>
<td>--device.ssm.measures "TTC"</td>
</tr>
<tr>
<td></td>
<td>speed</td>
<td>float &gt;= 0</td>
<td>The speed of the reporting vehicle at the occurrence of minTTC.</td>
<td>--device.ssm.measures "TTC"</td>
</tr>
<tr>
<td>maxDRAC</td>
<td>time</td>
<td>float</td>
<td>Time point of the maximal measured value for the DRAC.</td>
<td>--device.ssm.measures "DRAC"</td>
</tr>
<tr>
<td></td>
<td>position</td>
<td>2D-coordinate</td>
<td>Coordinate of the corresponding conflict point.</td>
<td>--device.ssm.measures "DRAC"</td>
</tr>
<tr>
<td></td>
<td>type</td>
<td>integer (Encounter type code)</td>
<td><a href="#encounter_types">Type code</a> of the corresponding encounter type. (Defines the variant of <a href="#drac">DRAC-calculation</a>.)</td>
<td>--device.ssm.measures "DRAC"</td>
</tr>
<tr>
<td></td>
<td>value</td>
<td>float &gt;= 0</td>
<td>The maximal measured DRAC-value.</td>
<td>--device.ssm.measures "DRAC"</td>
</tr>
<tr>
<td></td>
<td>speed</td>
<td>float &gt;= 0</td>
<td>The speed of the reporting vehicle at the occurrence of maxDRAC.</td>
<td>--device.ssm.measures "DRAC"</td>
</tr>
<tr>
<td>PET</td>
<td>time</td>
<td>float</td>
<td>Time point of the minimal measured value for the PET. (Usually the PET is only measured once, therefore no PETSpan is reported.)</td>
<td>--device.ssm.measures "PET"</td>
</tr>
<tr>
<td></td>
<td>position</td>
<td>2D-coordinate</td>
<td>Coordinate of the corresponding encroachment point.</td>
<td>--device.ssm.measures "PET"</td>
</tr>
<tr>
<td></td>
<td>type</td>
<td>integer (Encounter type code)</td>
<td><a href="#encounter_types">Type code</a> of the corresponding encounter type.</td>
<td>--device.ssm.measures "PET"</td>
</tr>
<tr>
<td></td>
<td>value</td>
<td>float &gt;= 0</td>
<td>The measured PET-value.</td>
<td>--device.ssm.measures "PET"</td>
</tr>
<tr>
<td></td>
<td>speed</td>
<td>float &gt;= 0</td>
<td>The speed of the reporting vehicle at the occurrence of PET.</td>
<td>--device.ssm.measures "PET"</td>
</tr>
</tbody>
</table>
<p>The <code>&lt;globalMeasures&gt;</code> element has the following structure:</p>
<table>
<thead>
<tr>
<th>Element</th>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
<th>Parameter</th>
</tr>
</thead>
<tbody>
<tr>
<td>timeSpan</td>
<td>values</td>
<td>list of floats</td>
<td>Simulation time points at which the reported measures are logged.</td>
<td></td>
</tr>
<tr>
<td>positions</td>
<td>values</td>
<td>list of 2D-coordinates</td>
<td>Simulation positions at which the reported measures are logged.</td>
<td>--device.ssm.write-positions</td>
</tr>
<tr>
<td>lane</td>
<td>values</td>
<td>list of strings</td>
<td>Simulation lane IDs at which the reported measures are logged.</td>
<td>--device.ssm.write-lane-positions</td>
</tr>
<tr>
<td>lanePosition</td>
<td>values</td>
<td>list of floats</td>
<td>Simulation positions on the lane at which the reported measures are logged.</td>
<td>--device.ssm.write-lane-positions</td>
</tr>
<tr>
<td>BRSpan</td>
<td>values</td>
<td>list of floats</td>
<td>Values of the brake rate at the time points given in timeSpan.</td>
<td>--device.ssm.measures "BR"</td>
</tr>
<tr>
<td>SGAPSpan</td>
<td>values</td>
<td>list of floats</td>
<td>Values of the spacing at the time points given in timeSpan.</td>
<td>--device.ssm.measures "SGAP"</td>
</tr>
<tr>
<td>TGAPSpan</td>
<td>values</td>
<td>list of floats</td>
<td>Values of the time headway at the time points given in timeSpan.</td>
<td>--device.ssm.measures "TGAP"</td>
</tr>
<tr>
<td>maxBR</td>
<td>time</td>
<td>float</td>
<td>Time at which the maximal value of the brake rate was recorded.</td>
<td>--device.ssm.measures "BR"</td>
</tr>
<tr>
<td></td>
<td>value</td>
<td>float</td>
<td>Maximal recorded value for the brake rate.</td>
<td>--device.ssm.measures "BR"</td>
</tr>
<tr>
<td></td>
<td>position</td>
<td>2D-coordinate</td>
<td>Position of the ego vehicle, where the maximal brake rate was recorded.</td>
<td>--device.ssm.measures "BR"</td>
</tr>
<tr>
<td>minSGAP</td>
<td>time</td>
<td>float</td>
<td>Time at which the minimal spacing was recorded.</td>
<td>--device.ssm.measures "SGAP"</td>
</tr>
<tr>
<td></td>
<td>value</td>
<td>float</td>
<td>Minimal recorded value for the spacing.</td>
<td>--device.ssm.measures "SGAP"</td>
</tr>
<tr>
<td></td>
<td>position</td>
<td>2D-coordinate</td>
<td>Position of the ego vehicle, where the minimal spacing was recorded.</td>
<td>--device.ssm.measures "SGAP"</td>
</tr>
<tr>
<td>minTGAP</td>
<td>time</td>
<td>float</td>
<td>Time at which the minimal time headway was recorded.</td>
<td>--device.ssm.measures "TGAP"</td>
</tr>
<tr>
<td></td>
<td>value</td>
<td>float</td>
<td>Minimal recorded value for the time headway.</td>
<td>--device.ssm.measures "TGAP"</td>
</tr>
<tr>
<td></td>
<td>position</td>
<td>2D-coordinate</td>
<td>Position of the ego vehicle, where the minimal time headway was recorded.</td>
<td>--device.ssm.measures "TGAP"</td>
</tr>
</tbody>
</table>
<h3 id="restricting-ssm-device-to-edges-and-junctions">Restricting SSM Device to Edges and Junctions<a class="headerlink" href="#restricting-ssm-device-to-edges-and-junctions" title="Permanent link">&para;</a></h3>
<p>The option <code>--device.ssm.filter-edges.input-file &lt;input_list&gt;</code> can be used to specify an input file containing edgeIDs and junctionIDs that are used to restrict the measurement of conflicts.
The edges and junctions must be defined as following:</p>
<pre><code>edge:edgeID1
edge:edgeID2
...
junction:junctionID1
junction:junctionID2
...
</code></pre>
<p>The edges adjoining the given junctions and the given edges are used to measure the conflicts. Only conflicts occurring at these edges are measured and outputted.</p>
<h2 id="traci">TraCI<a class="headerlink" href="#traci" title="Permanent link">&para;</a></h2>
<p>The following values can be retrieved for equipped vehicles if they have enabled the corresponding measures:</p>
<ul>
<li>traci.vehicle.getParameter(vehID, "device.ssm.minTTC")</li>
<li>traci.vehicle.getParameter(vehID, "device.ssm.minPET")</li>
<li>traci.vehicle.getParameter(vehID, "device.ssm.maxDRAC")</li>
</ul>
<p>The values correspond to the current min/max for all currently active encounters.</p>
<h2 id="visualization-examples">Visualization Examples<a class="headerlink" href="#visualization-examples" title="Permanent link">&para;</a></h2>
<p>The SSM output file can be used as input to <a href="https://sumo.dlr.de/docs/Tools/Visualization.html#time_to_collision_over_simulation_time">plotXMLAttributes.py</a>. Here is an example:</p>
<p><img src="../../images/plot_ttc.png" title="plot_ttc.png" width=600px/></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>