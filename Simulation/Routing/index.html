
<!doctype html>
<html lang="ja" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kudzuyu.github.io/SUMO-wiki-ja/Simulation/Routing/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Routing - SUMO wiki ja</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/notosansjp.css">
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:600,800">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#features-that-cause-rerouting" class="md-skip">
          コンテンツにスキップ
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="ヘッダー">
    <a href="../.." title="SUMO wiki ja" class="md-header__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../images/sumo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SUMO wiki ja
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Routing
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="検索" placeholder="検索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="検索">
        
        <button type="reset" class="md-search__icon md-icon" title="クリア" aria-label="クリア" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            検索を初期化
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="タブ" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  ドキュメント

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Downloads/" class="md-tabs__link">
        
  
  
    
  
  ダウンロード

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../Publications/" class="md-tabs__link">
        
  
  
    
  
  出版物

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="ナビゲーション" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="SUMO wiki ja" class="md-nav__button md-logo" aria-label="SUMO wiki ja" data-md-component="logo">
      
  <img src="../../images/sumo-logo.png" alt="logo">

    </a>
    SUMO wiki ja
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ドキュメント
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Downloads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ダウンロード
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Publications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    出版物
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目次">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目次
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#routing-triggered-by-the-vehicle" class="md-nav__link">
    <span class="md-ellipsis">
      Routing triggered by the vehicle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#incomplete-trips-and-flows" class="md-nav__link">
    <span class="md-ellipsis">
      Incomplete Trips and Flows
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-route-signage" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Route Signage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#traci" class="md-nav__link">
    <span class="md-ellipsis">
      TraCI
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="features-that-cause-rerouting">Features that cause rerouting<a class="headerlink" href="#features-that-cause-rerouting" title="Permanent link">&para;</a></h1>
<p>There are multiple simulation features that allow routing at simulation
time. They are described in the following:</p>
<h2 id="routing-triggered-by-the-vehicle">Routing triggered by the vehicle<a class="headerlink" href="#routing-triggered-by-the-vehicle" title="Permanent link">&para;</a></h2>
<p>This type of routing works by assigning a <em>rerouting device</em> to some or
all vehicles. Details are given at
<a href="../../Demand/Automatic_Routing/">Demand/Automatic_Routing</a>.</p>
<h2 id="incomplete-trips-and-flows">Incomplete Trips and Flows<a class="headerlink" href="#incomplete-trips-and-flows" title="Permanent link">&para;</a></h2>
<p>This is a special case of the above method. Vehicles with incomplete
routes automatically receive a <em>rerouting device</em> and are rerouted once
when entering the network. In some scenarios this is a practical
<a href="../../Demand/Dynamic_User_Assignment/#oneshot-assignment"><em>one-shot</em>-approach to route assignment</a>
that avoids time-consuming <a href="../../Demand/Dynamic_User_Assignment/">iterative assignment</a>.</p>
<h2 id="alternative-route-signage">Alternative Route Signage<a class="headerlink" href="#alternative-route-signage" title="Permanent link">&para;</a></h2>
<p>This is a location based method for triggering rerouting and is
described at <a href="../Rerouter/">Simulation/Rerouter</a>.</p>
<h2 id="traci">TraCI<a class="headerlink" href="#traci" title="Permanent link">&para;</a></h2>
<p>Using the methods <a href="../../TraCI/Change_Vehicle_State/"><em>traci.vehicle.changeTarget</em> or <em>traci.vehicle.rerouteTraveltime</em></a>
rerouting is triggered for the specified vehicle.</p>
<p>Alternatively, routes can be computed using
<a href="../../TraCI/Simulation_Value_Retrieval/"><em>traci.simulation.findRoute</em></a>
and applied using
<a href="../../TraCI/Change_Vehicle_State/"><em>traci.vehicle.setRoute</em></a>.</p>
<p>For persons, the function
<a href="../../TraCI/Simulation_Value_Retrieval/"><em>traci.simulation.findIntermodalRoute</em></a>
can be used to compute simple walks as well as <a href="../../IntermodalRouting/">itineraries for public transport</a>.</p>
<h1 id="alternative-destinations">Alternative Destinations<a class="headerlink" href="#alternative-destinations" title="Permanent link">&para;</a></h1>
<p>By using <a href="../Rerouter/"><code>&lt;rerouter&gt;</code>-definitions</a>, vehicles can be routed
to alternative destinations. A different method is to use <a href="../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#traffic_assignment_zones_taz">traffic assignment zones (TAZ)</a>.
This allows vehicles to change their destination to the best alternative
from a list of potential destinations.</p>
<h1 id="handling-of-temporary-obstructions">Handling of temporary obstructions<a class="headerlink" href="#handling-of-temporary-obstructions" title="Permanent link">&para;</a></h1>
<p>By using <a href="../Rerouter/"><code>&lt;rerouter&gt;</code>-definitions</a> of type <code>&lt;closingReroute allow="..."/&gt;</code> (or <code>&lt;closingLaneReroute allow="..."/&gt;</code> if all lanes are closed) it is possible change road permissions temporarily (i.e. to model construction sites). By default, the simulation will raise an error when loading a route that passes a closed edge or if routing to the destination fails because of an obstruction.
By setting a vehicle routing mode that includes bit-flag <em>traci.constants.ROUTING_MODE_IGNORE_TRANSIENT_PERMISSIONS</em>, this behavior can be changed. Instead vehicles will ignore obstructions until reaching the closed edge and then wait there (potentially <a href="../Why_Vehicles_are_teleporting/">teleporting</a> after *<em>--time-to-teleport</em> is reached).</p>
<p>Setting the routing mode (to ignore blockage) can be accomplished in the following ways:</p>
<ul>
<li><code>traci.vehicle.setRoutingMode(vehID, traci.constants.ROUTING_MODE_IGNORE_TRANSIENT_PERMISSIONS)</code></li>
<li>sumo option <strong>--device.rerouting.mode 8</strong></li>
<li>defining <code>&lt;param key="device.rerouting.mode value="8"&gt;</code> in the <code>vType</code> or a single <code>&lt;vehicle&gt;, &lt;trip&gt;</code> or <code>&lt;flow&gt;</code>.</li>
</ul>
<h1 id="travel-time-values-for-routing">Travel-time values for routing<a class="headerlink" href="#travel-time-values-for-routing" title="Permanent link">&para;</a></h1>
<p>By default, the route with the least travel time is chosen. The travel
time depends on the current routing mode (configurable via
<em>traci.vehicle.setRoutingMode</em>) or via the explicit <em>routingMode</em>
argument to <em>traci.simulation.findRoute</em>.</p>
<h2 id="routing-mode-traciconstantsrouting_mode_default">Routing Mode <em>traci.constants.ROUTING_MODE_DEFAULT</em><a class="headerlink" href="#routing-mode-traciconstantsrouting_mode_default" title="Permanent link">&para;</a></h2>
<p>The following order of steps is taken to retrieve the travel time for each edge. If a step provides data, this is used, otherwise the next step is attempted:</p>
<ol>
<li>The vehicle retrieves its individual data storage. This can be set
    and retrieved using the TraCI vehicle methods <a href="../../TraCI/Change_Vehicle_State/#change_edge_travel_time_information_0x58"><em>change edge travel time information</em></a>
    and <a href="../../TraCI/Vehicle_Value_Retrieval/#edge_travel_time_information_0x58"><em>edge travel time information</em></a>.</li>
<li>The <a href="../../Demand/Shortest_or_Optimal_Path_Routing/#custom_edge_weights">global edge weights</a>
    loaded using option <strong>--weight-files</strong> are retrieved.</li>
<li>The global edge weights (set and retrieved via TraCI) using the
    TraCI edge methods <a href="../../TraCI/Change_Edge_State/"><em>change edge travel time information</em></a> and <a href="../../TraCI/Edge_Value_Retrieval/"><em>edge travel time information</em></a>.</li>
<li>The minimum travel time (length/allowedSpeed) is used.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The edge weights for cases 1-3 support modeling time-dependent variations in edge travel time. This means future changes in travel time along a vehicles route can be taking into account when routing.</p>
</div>
<h2 id="routing-mode-traciconstantsrouting_mode_aggregated">Routing Mode <em>traci.constants.ROUTING_MODE_AGGREGATED</em><a class="headerlink" href="#routing-mode-traciconstantsrouting_mode_aggregated" title="Permanent link">&para;</a></h2>
<p>The <a href="../../Demand/Automatic_Routing/#edge_weights">smoothed travel times</a> computed for
the <em>rerouting device</em> are used. Note, that these can also be modified via TraCI.</p>
<h2 id="randomized-travel-times">Randomized travel times<a class="headerlink" href="#randomized-travel-times" title="Permanent link">&para;</a></h2>
<p><a href="../../sumo/">Sumo</a> and <a href="../../duarouter/">duarouter</a> support option <strong>--weights.random-factor FLOAT</strong>. When this option is set, edge weights (i.e. travel times) for routing are dynamically disturbed by a random factor drawn uniformly from <code>[1,FLOAT)</code>. The value of FLOAT thereby sets an upper bound on the difference in travel time between the actual fastest path and the routing result. With a value of <code>2</code>. The result will have twice the travel time / cost of the optimal path in the worst case (In the unlikely event where all edges of the fastest path happen to get a disturbance factor of 2).</p>
<p>Randomized edge weights can be useful in grid networks where there are many paths have the same (or almost the same) travel cost and the default routing algorithm would send all vehicles on the same path. It can also be used to model imperfection in travel time estimation.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>By default, runs with the same inputs will still yield the same outcome. To vary the randomness between runs, options <a href="../Randomness/#random_number_generation_rng">--seed or --random</a> must be used.</p>
</div>
<h2 id="special-cases">Special cases<a class="headerlink" href="#special-cases" title="Permanent link">&para;</a></h2>
<ul>
<li>When rerouting with the <em>rerouting device</em> the travel time always
  comes from another data storage which is updated continuously with a
  configurable averaging procedure. The <a href="../../Demand/Automatic_Routing/">parameters for this updating strategy are user definable</a>.
  It is also possible to <a href="../../TraCI/Change_Vehicle_State/#supported_device_parameters">set the device travel time directly via TraCI</a>.</li>
<li>When using the TraCI method rerouteTraveltime from the <a href="../../TraCI/Interfacing_TraCI_from_Python/">python TraCI library</a>, the
  command supports an additional boolean parameter <em>currentTravelTime</em>
  (default <em>True</em>). When this parameter is set to <em>True</em>, the vehicle will temporarily use ROUTING_MODE_AGGREGATED</li>
</ul>
<h1 id="routing-by-travel-time-and-edge-priority">Routing by Travel time and Edge Priority<a class="headerlink" href="#routing-by-travel-time-and-edge-priority" title="Permanent link">&para;</a></h1>
<p>Sometimes it is useful to guide route search with additional information while still taking travel times into account.
For this use case the option <strong>--weights.priority-factor FLOAT</strong> can be used with <a href="../../sumo/">sumo</a> and <a href="../../duarouter/">duarouter</a>.</p>
<p>When this option is set, the priority value of each edge is factored into the routing decision so that low-priority edges receive a penalty (they appear to be slower) whereas high-priority edges receive little or no penalty. For the option value <code>PriorityFactor</code>, the penalty is computed thus:</p>
<pre><code>  MinEdgePriority : minimum priority value of all edges
  MaxEdgePriority : maximum priority value of all edges
  EdgePriorityRange = MaxEdgePriority - MinEdgePriority

  relativeInversePrio = 1 - ((edgePriority - MinEdgePriority) / EdgePriorityRange)
  effort =  traveltime * (1 + relativeInversePrio * PriorityFactor)
</code></pre>
<p>As a consequence:</p>
<ul>
<li>the highest priority edge will get no penalty</li>
<li>the travel time of the lowest priority edge is multiplied with 1+PriorityFactor,</li>
<li>edges with in-between priorities will get a scaled penalty</li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>option <strong>-weights.priority-factor</strong> does not apply to pedestrian and intermodal routing. To customize edge preferences for this kind of routing use <a href="#routing_by_travel_time_and_routingtype">preferences</a>.</p>
</div>
<h1 id="routing-by-travel-time-and-routingtype">Routing by Travel time and routingType<a class="headerlink" href="#routing-by-travel-time-and-routingtype" title="Permanent link">&para;</a></h1>
<p>Sometimes it is useful to customize route search for different <a href="../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#abstract_vehicle_class">vehicle classes</a> or <a href="../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#vehicle_types">vehicle types</a> with additional information while still taking travel times into account.</p>
<p>For this use case the element <code>&lt;preference&gt;</code> can be loaded from additional files (with option <strong>--additional-files</strong>).
Preferences are defined with the following attributes</p>
<table>
<thead>
<tr>
<th>Attribute Name</th>
<th>Value Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>routingType</strong></td>
<td>id (string)</td>
<td>The routingType or type of edges</td>
</tr>
<tr>
<td><strong>priority</strong></td>
<td>float &gt; 0</td>
<td>The priority value for edges with that routingType</td>
</tr>
<tr>
<td>vTypes</td>
<td>id list</td>
<td>A list of <a href="../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#vehicle_types">vehicle types</a> to which this preference applies</td>
</tr>
<tr>
<td>vClasses</td>
<td>id list</td>
<td>A list of <a href="../../Definition_of_Vehicles%2C_Vehicle_Types%2C_and_Routes/#abstract_vehicle_class">vehicle types</a> to which this preference applies</td>
</tr>
</tbody>
</table>
<p>When the <code>&lt;preference&gt;</code> element is loaded, all listed <code>vTypes</code> and <code>vClasses</code> will have their edge travelTime divided by the defined <code>priority</code> value for all edges that have the given <code>routingType</code>. If an edge does not define attribute <code>routingType</code> it's <code>type</code> is used for matching preferences.</p>
<p>Example:</p>
<pre><code class="language-xml">&lt;additional &gt;
    &lt;preference routingType=&quot;typeB&quot; vClasses=&quot;wheelchair&quot; priority=&quot;4&quot;/&gt;
&lt;/additional&gt;
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a <code>&lt;preference&gt;</code> element defines neither <code>vTypes</code> nor <code>vClasses</code> it will apply the <code>priority</code> to all vehicles/persons.</p>
</div>
<h1 id="routing-by-effort">Routing by <em>effort</em><a class="headerlink" href="#routing-by-effort" title="Permanent link">&para;</a></h1>
<p>By default, the objective of the routing algorithms is to minimize the travel time between origin and destination.
The travel time can either be computed from the speed limits and vehicle maximum speed, it can be estimated at runtime from the simulation state or it can be loaded from a data file. The latter option allows defining travel times for the future.
An example for the relevance of future travel times would be this:</p>
<ul>
<li>a vehicle departs for a long trip at a time where there is no jamming</li>
<li>it is known that parts of the network will be jammed later</li>
<li>the route of the vehicle computed at departure time can circumvent the jam because the routing algorithm is aware that by the time those edges are reached they will be jammed.</li>
</ul>
<p>It may be useful to compute routes which minimize some other criteria (called <strong>effort</strong>) besides travel time (distance, emissions, price, ...).
When these quantities are meant to change over time, the routing algorithm needs two kinds of values for each edge:</p>
<ul>
<li>the <strong>effort</strong> that shall be minimized</li>
<li>the <strong>travel time</strong> for the edge.</li>
</ul>
<p>The travel time is needed to compute at which time a certain edge is reached so that efforts which change over time can be used correctly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When the effort values do not change over time, routing by effort can be achieved by loading weight-files with a modified <code>traveltime</code> attribute (the effort value is written into the traveltime attribute) and the option <strong>--weight-attribute</strong> can be omitted.</p>
</div>
<p>When setting the options <strong>--weight-file</strong> and <strong>--weight-attribute</strong>, additional routing efforts are read
according to the specified attribute. These are only used when calling
the TraCI function <a href="../../TraCI/Change_Vehicle_State/">reroute by effort</a>. The assumed efforts
along a vehicles route are time-based values and the time is
computed based on the travel time values described above. The effort can
also be set using <em>traci.edge.setEffort</em>.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The default effort value is 0 which causes detour routes to be preferred when not loading sensible effort values.</p>
</div>
<p>The applications <a href="../../duarouter/">duarouter</a> and <a href="../../marouter/">marouter</a> also support the options <strong>--weight-file</strong> and <strong>--weight-attribute</strong> and this may be used to ready any edge attribute value in the given file.</p>
<h1 id="routing-by-distance">Routing by <em>distance</em><a class="headerlink" href="#routing-by-distance" title="Permanent link">&para;</a></h1>
<p>Finding the shortest route rather than the fastest can be achieved by
loading suitable <em>effort</em>-data (see
<a href="#routing_by_effort">#Routing_by_effort</a>) or by setting
the speed for all network edges to the same value.</p>
<p>A simpler solution is to define a vehicle type that travels with the
same speed on all edges:</p>
<pre><code class="language-xml">&lt;vType id=&quot;routeByDistance&quot; maxSpeed=&quot;1&quot;/&gt;
</code></pre>
<p>and then using that type to find the fastest route:</p>
<pre><code>stageResult = traci.simulation.findRoute(fromEdge, toEdge, &quot;routeByDistance&quot;)
shortestDistance = stage.length
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Older versions of SUMO do not supply the value <em>stage.length</em>. In this case <strong>shortestDistance = stage.travelTime</strong> is also correct due to the speed of 1m/s.</p>
</div>
<h1 id="routing-algorithms">Routing Algorithms<a class="headerlink" href="#routing-algorithms" title="Permanent link">&para;</a></h1>
<p>Applications that perform routing (<a href="../../sumo/">sumo</a>,
<a href="../../sumo-gui/">sumo-gui</a>, <a href="../../duarouter/">duarouter</a>,
<a href="../../marouter/">marouter</a>) support the option <strong>--routing-algorithm</strong> for selecting among
the following values:</p>
<h2 id="dijkstra">dijkstra<a class="headerlink" href="#dijkstra" title="Permanent link">&para;</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstras</a>
algorithm is the simplest and slowest of routing algorithms. It is
well suited to routing in time-dependent networks (i.e. when the
travel time on an edge depends on the time of day)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the default algorithm</p>
</div>
<h2 id="astar-a">astar (A*)<a class="headerlink" href="#astar-a" title="Permanent link">&para;</a></h2>
<p>The <a href="https://en.wikipedia.org/wiki/A*_search_algorithm">A*</a> routing
algorithm uses a metric for bounding travel time to direct the
search and is often faster than dijkstra. Here, the metric <em>euclidean distance / maximumVehicleSpeed</em>) is used.</p>
<h2 id="alt">ALT<a class="headerlink" href="#alt" title="Permanent link">&para;</a></h2>
<p>By using <em>astar</em> together with the option <strong>--astar.landmark-distances</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;FILE&gt;</em></a> the ALT-Algorithm is activated.
The name ALT stands for: <strong>A</strong>*, <strong>L</strong>andmarks, <strong>t</strong>riangle inequality.
It uses a precomputed distance table to selected network edges (so-called landmarks) to speed up the search, often by a significant factor.</p>
<ul>
<li>A lookup table can be generated by creating a file with one landmark edge id per line (e.g. landmarks.txt)
and then setting the options <strong>--astar.landmark-distances landmarks.txt --astar.save-landmark-distances lookuptable.txt</strong>.</li>
<li>an alternative input for generating a distance table is one geo-coordinate in the form <code>LON LAT</code> per line</li>
<li>the tool <a href="../../Tools/Misc/#generatelandmarkspy">generateLandmarks.py</a> can be used to generate a landmark input file by distributing edges around the rim of the network in all directions</li>
<li>As a rule of thumb using 8-16 edges distributed around the main roads that border the network achieve good ALT-performance. Using more edges is not recommended because each landmark adds a fixed overhead).</li>
<li>by using <em>astar</em> together with the option <strong>--astar.all-distances</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;FILE&gt;</em></a> the A* algorithm is
  used together with a complete (and often huge) distance table to allow for blazing fast search. This is only recommended for medium sized networks with a high number of routing queries</li>
</ul>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>pre-computed distance tables are not useful when planning to perform routing with either one of the options <strong>--weights.priority-factor</strong> or <strong>--weights.random-factor</strong> as these change the actual distances.</p>
</div>
<h2 id="ch-contraction-hierarchies">CH (Contraction Hierarchies)<a class="headerlink" href="#ch-contraction-hierarchies" title="Permanent link">&para;</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Contraction_hierarchies">Contraction Hierarchies</a>
is a preprocessing-based routing algorithm. This is very efficient
when a large number of queries is expected. The algorithm does not
consider time-dependent weights. Instead, new preprocessing can be
performed for time-slices of fixed size by setting the option <strong>--weight-period</strong> <a href="/Basics/Notation/#データタイプ"><em>&lt;TIME&gt;</em></a>.</p>
<ul>
<li>When used with <a href="../../duarouter/">duarouter</a>, edge permissions are ignored so this should only be used in unimodal networks.</li>
<li>When used with <a href="../../sumo/">sumo</a>, the computed routes are only valid for the default 'passenger' class.</li>
</ul>
<h2 id="chwrapper">CHWrapper<a class="headerlink" href="#chwrapper" title="Permanent link">&para;</a></h2>
<p>This works like <em>CH</em> but performs separate preprocessing for every vehicle class that is encountered, thereby
enabling routing in multi modal scenarios</p>
<h1 id="further-options-that-affect-routing">Further Options that affect routing<a class="headerlink" href="#further-options-that-affect-routing" title="Permanent link">&para;</a></h1>
<ul>
<li><strong>--weights.minor-penalty FLOAT</strong> : set a fixed time penalty for passing junctions without having right-of-way (default 1.5s)</li>
<li><strong>--persontrip.walk-opposite-factor FLOAT</strong> : set penalty speed factor for walking against the flow of vehicular traffic (see <a href="../Pedestrians/#pedestrian_routing">pedestrian routing</a>) (default 1)</li>
</ul>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f", "clipboard.copy": "\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u30b3\u30d4\u30fc", "search.result.more.one": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3082\u30461\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.more.other": "\u3053\u306e\u30da\u30fc\u30b8\u5185\u306b\u3042\u3068#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.none": "\u4f55\u3082\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f", "search.result.one": "1\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.other": "#\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "search.result.placeholder": "\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "search.result.term.missing": "\u691c\u7d22\u306b\u542b\u307e\u308c\u306a\u3044", "select.version": "\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>